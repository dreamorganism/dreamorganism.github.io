(()=>{var O=e=>typeof e=="number";var tt=(e,t=r=>r!==void 0?": "+r:"")=>class extends Error{constructor(r){super(e(r)+t(r))}};var Hs=tt(()=>"illegal arity"),Vt=e=>{throw new Hs(e)};function _r(...e){let[t,r,o,n,i,s,c,l,p,a]=e;switch(e.length){case 0:Vt(0);case 1:return t;case 2:return(...m)=>t(r(...m));case 3:return(...m)=>t(r(o(...m)));case 4:return(...m)=>t(r(o(n(...m))));case 5:return(...m)=>t(r(o(n(i(...m)))));case 6:return(...m)=>t(r(o(n(i(s(...m))))));case 7:return(...m)=>t(r(o(n(i(s(c(...m)))))));case 8:return(...m)=>t(r(o(n(i(s(c(l(...m))))))));case 9:return(...m)=>t(r(o(n(i(s(c(l(p(...m)))))))));case 10:default:let f=(...m)=>t(r(o(n(i(s(c(l(p(a(...m))))))))));return e.length===10?f:_r(f,...e.slice(10))}}var T=(e,t)=>e!=null&&typeof e[t]=="function";var Nt=e=>T(e,"xform")?e.xform():e;function st(...e){return e=e.map(Nt),_r.apply(null,e)}var U=e=>e!=null&&typeof e[Symbol.iterator]=="function";var gt=(e,t)=>[e[0],e[1],t];var W=Symbol(),$=()=>{};var Oe=e=>e!=null&&typeof e!="function"&&e.length!==void 0;var zt=class{constructor(t){this.value=t}deref(){return this.value}},So=e=>new zt(e),v=e=>e instanceof zt,Ut=e=>e instanceof zt?e:new zt(e),G=e=>e instanceof zt?e.deref():e;var Xs=e=>e.length===2?[void 0,e[1]]:e.length===3?[e[1],e[2]]:Vt(e.length);function we(...e){let t=e[0],r=t[0],o=t[1],n=t[2];e=Xs(e);let i=e[0]==null?r():e[0],s=e[1];return G(o(T(s,"$reduce")?s.$reduce(n,i):Oe(s)?Ws(n,i,s):Zs(n,i,s)))}var Ws=(e,t,r)=>{for(let o=0,n=r.length;o<n;o++)if(t=e(t,r[o]),v(t)){t=t.deref();break}return t},Zs=(e,t,r)=>{for(let o of r)if(t=e(t,o),v(t)){t=t.deref();break}return t},Gt=(e,t)=>[e,r=>r,t],Ao=(e,t)=>{let r=t.length-1;return U(t[r])?t.length>1?we(e.apply(null,t.slice(0,r)),t[r]):we(e(),t[0]):void 0};function ke(e){return e?[...e]:Gt(()=>[],(t,r)=>(t.push(r),t))}function*xt(e,t){let r=Nt(e)(ke()),o=r[1],n=r[2];for(let i of t){let s=n([],i);if(v(s)){yield*G(o(s.deref()));return}s.length&&(yield*s)}yield*G(o([]))}function*me(e,t){let r=Nt(e)([$,$,(o,n)=>n])[2];for(let o of t){let n=r(W,o);if(v(n)){n=G(n.deref()),n!==W&&(yield n);return}n!==W&&(yield n)}}var bt=(e,t,r=me)=>{let o=t.length-1;return U(t[o])?t.length>1?r(e.apply(null,t.slice(0,o)),t[o]):r(e(),t[0]):void 0};function E(e,t){return U(t)?me(E(e),t):r=>{let o=r[2];return gt(r,(n,i)=>o(n,e(i)))}}function Sr(...e){return bt(Sr,e)||(t=>{let r=t[2],o=e[0],n=e[1]||0;return gt(t,(i,s)=>r(i,o(n++,s)))})}function Ar(e,t,r){return new jo(e,t,r)}var jo=class{constructor(t,r,o){t===void 0?(t=0,r=Infinity):r===void 0&&(r=t,t=0),o=o===void 0?t<r?1:-1:o,this.from=t,this.to=r,this.step=o}*[Symbol.iterator](){let{from:t,to:r,step:o}=this;if(o>0)for(;t<r;)yield t,t+=o;else if(o<0)for(;t>r;)yield t,t+=o}$reduce(t,r){let o=this.step;if(o>0)for(let n=this.from,i=this.to;n<i&&!v(r);n+=o)r=t(r,n);else for(let n=this.from,i=this.to;n>i&&!v(r);n+=o)r=t(r,n);return r}};function vo(e,t){e=e||"";let r=!0;return t?[...t].join(e):Gt(()=>"",(o,n)=>(o=r?o+n:o+e+n,r=!1,o))}function jr(e,t){return U(t)?xt(jr(e),t):r=>{let o=r[2],n=e;return gt(r,(i,s)=>--n>0?o(i,s):n===0?Ut(o(i,s)):So(i))}}function vr(...e){return Ys(vr,we,e)}var Ys=(e,t,r)=>{let o,n;switch(r.length){case 4:n=r[3],o=r[2];break;case 3:n=r[2];break;case 2:return E(i=>e(r[0],r[1],i));default:Vt(r.length)}return t(Nt(r[0])(r[1]),o,n)};function*Eo(...e){let t=e.map(r=>r[Symbol.iterator]());for(;;){let r=[];for(let o of t){let n=o.next();if(n.done)return;r.push(n.value)}yield r}}var Qs=tt(()=>"unsupported operation"),Bt=e=>{throw new Qs(e)};var D=(e=0)=>{let t=new Array(5),r,o=(...n)=>{let i=t[n[e].length]||r;return i?i(...n):Bt(`no impl for vec size ${n[e].length}`)};return o.add=(n,i)=>t[n]=i,o.default=n=>r=n,o.impl=n=>t[n]||r,o};var Ce="o,a,b",No="o,a,b,c",To="o,a,n",Io="o,a,n,b",De="o,a,b,n",Oo="io=0,ia=0,so=1,sa=1";var wo="!o&&(o=[]);";var ko=e=>([t,r,o])=>`${t}=${r}${e}${o};`,Co=e=>([t,r])=>`${t}=${r}${e}n;`,Do=(e,t)=>([r,o,n,i])=>`${r}=(${o}${e}${n})${t}${i};`,Ro=(e,t)=>([r,o,n])=>`${r}=(${o}${e}${n})${t}n;`,Mo=(e,t)=>([r,o,n])=>`${r}=(${o}${e}n)${t}${n};`;var Re=([e,t])=>`${e}*${t}`,$o=([e,t])=>`s+=${e}*${t};`,Lo=([e,t])=>`${e}=${t};`,Po=([e])=>`${e}=n;`;var qo=([e,t,r])=>`${e}=${t}+(${r}-${t})*n;`;var Ks=e=>t=>t>1?`${e}[i${e}+${t}*s${e}]`:t==1?`${e}[i${e}+s${e}]`:`${e}[i${e}]`,Js=e=>E(Ks(e),Ar()),tc=e=>E(t=>`${e}[${t}]`,Ar()),Fo=(e,t,r,o="a",n="",i="",s="",c=!1)=>[i,vr(st(jr(e),Sr((l,p)=>t(p,l))),vo(n),Eo.apply(null,r.split(",").map(c?Js:tc))),s,o!==""?`return ${o};`:""],ec=(e,t,r="a",o,n,i=!1)=>[o,"for(let i=a.length;--i>=0;) {",e(t.split(",").map(i?s=>`${s}[i${s}+i*s${s}]`:s=>`${s}[i]`)),"}",n,r!==null?`return ${r};`:""];var rc=(e,t)=>`!${e} && (${e}=${t.split(",")[1]});`,ct=(e,t,r,o=r,n="a",i,s,c,l=!1)=>new Function(r,Fo(e,t,o,n,i,s,c,l).join("")),Vo=(e,t,r,o,n,i=n,s="a",c="",l,p,a=!1)=>new Function(o,`return (${n})=>{${Fo(e,r,i,s,c,l,p,a).join("")}}`)(...t),Tt=(e,t,r=t,o="a",n,i,s=!1)=>new Function(t,ec(e,r,o,n,i,s).join(""));var L=(e,t=Ce,r,o="o",n=1,i)=>{r=r||t,i=i??rc(o,t);let s=D(n),c=l=>s.add(l,ct(l,e,t,r,o,"",i));return s.default(Tt(e,t,r,o,i)),[s,c(2),c(3),c(4)]};var Ht=e=>L(ko(e)),Me=e=>L(Co(e),To);var[fe,Xt,zo,Dp]=Ht("+");var[x,ue,Lp,Pp]=L(Lo,"o,a",void 0,"o",1,wo);var Er=e=>T(e,"copy")?e.copy():x([],e),$e=e=>e.map(Er);var R=e=>({...e.attribs}),Wt=(e,t)=>new e($e(t.points),R(t));var It=class{constructor(t=[],r){this.points=t,this.attribs=r}*[Symbol.iterator](){yield*this.points}};var Uo=Object.getPrototypeOf({}),Le="function",Go="string",I=(e,t)=>{let r;if(e===t)return!0;if(e!=null){if(typeof e.equiv===Le)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===Le)return t.equiv(e)}else return e==t;return typeof e===Go||typeof t===Go?!1:(r=Object.getPrototypeOf(e),(r==null||r===Uo)&&(r=Object.getPrototypeOf(t),r==null||r===Uo)?Or(e,t):typeof e!==Le&&e.length!==void 0&&typeof t!==Le&&t.length!==void 0?Nr(e,t):e instanceof Set&&t instanceof Set?Tr(e,t):e instanceof Map&&t instanceof Map?Ir(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)},Nr=(e,t,r=I)=>{let o=e.length;if(o===t.length)for(;o-- >0&&r(e[o],t[o]););return o<0},Tr=(e,t,r=I)=>e.size===t.size&&r([...e.keys()].sort(),[...t.keys()].sort()),Ir=(e,t,r=I)=>e.size===t.size&&r([...e].sort(),[...t].sort()),Or=(e,t,r=I)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let o in e)if(!t.hasOwnProperty(o)||!r(e[o],t[o]))return!1;return!0};var B=Math.PI,j=B*2,wr=B/2,Xp=B/3,Wp=B/4,Zp=B/6,Yp=1/B,oc=1/j,Qp=1/wr,Kp=B/180,Jp=180/B,ta=(1+Math.sqrt(5))/2,nc=Math.SQRT2,ic=Math.sqrt(3),ea=nc/2,ra=ic/2,oa=1/3,na=2/3,ia=1/6,S=1e-6;var Pe=(e,t=1)=>[Math.sin(e)*t,Math.cos(e)*t],Zt=(e,t=1)=>[Math.cos(e)*t,Math.sin(e)*t];var w=e=>e<0?0:e>1?1:e;var qe=(e,t,r)=>t+(r-t)*w(e);var[ua,Bo,ha,da]=Ht("*");var kr=(e,t)=>(r,o,n)=>{r?r!==o&&x(r,o):r=o;let i=Math.sin(n),s=Math.cos(n),c=o[e],l=o[t];return r[e]=c*s-l*i,r[t]=c*i+l*s,r},ba=kr(1,2),ya=kr(2,0),Ho=kr(0,1);var Xo=(e,t,r,o,n,i,s=[])=>yt(e,t,r,qe(i,o,n),s),yt=(e,t,r,o,n=[])=>Xt(null,Ho(null,Bo(n,Zt(o),t),r),e);var Yt=class{constructor(t,r,o,n,i,s=!1,c=!1,l){this.pos=t,this.r=r,this.axis=o,this.start=n,this.end=i,this.xl=s,this.cw=c,this.attribs=l}get type(){return"arc"}copy(){return new Yt(x([],this.pos),x([],this.r),this.axis,this.start,this.end,this.xl,this.cw,R(this))}equiv(t){return t instanceof Yt&&I(this.pos,t.pos)&&I(this.r,t.r)&&this.start===t.start&&this.end===t.end&&this.axis===t.axis&&this.xl===t.xl&&this.cw&&t.cw}pointAt(t,r=[]){return Xo(this.pos,this.r,this.axis,this.start,this.end,t,r)}pointAtTheta(t,r=[]){return yt(this.pos,this.r,this.axis,t,r)}toHiccup(){return["path",this.attribs,[["M",this.pointAt(0)],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){return[["A",this.r[0],this.r[1],this.axis,this.xl,this.cw,this.pointAt(1)]]}};var lt=class extends It{get type(){return"cubic"}copy(){return Wt(lt,this)}toHiccup(){return["path",this.attribs,[["M",this.points[0]],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){let t=this.points;return[["C",t[1],t[2],t[3]]]}};var Qt=class{constructor(t,r=[]){this.attribs=t,this.children=r}get type(){return"group"}*[Symbol.iterator](){yield*this.children}copy(){return this.copyTransformed(t=>t.copy())}copyTransformed(t){return new Qt(R(this),this.children.map(t))}equiv(t){return t instanceof Qt&&I(this.children,t.children)}toHiccup(){return["g",this.attribs,...this.children.map(t=>t.toHiccup())]}};var sc=tt(()=>"illegal state"),Kt=e=>{throw new sc(e)};var Jt=class{constructor(t=[],r){this.segments=t,this.attribs=r,this.closed=!1}get type(){return"path"}*[Symbol.iterator](){yield*this.segments}copy(){let t=new Jt(this.segments.map(r=>{let o={type:r.type};return r.point&&(o.point=Er(r.point)),r.geo&&(o.geo=r.geo.copy()),o}),R(this));return t.closed=this.closed,t}equiv(t){return t instanceof Jt&&I(this.segments,t.segments)}add(t){this.closed&&Kt("path already closed"),this.segments.push(t)}toHiccup(){let t=[],r=this.segments,o=r.length;if(o>1){for(let n=0;n<o;n++){let i=r[n];i.geo?t=t.concat(i.geo.toHiccupPathSegments()):i.point&&t.push(["M",i.point])}this.closed&&t.push(["Z"])}return["path",this.attribs||{},t]}};var he=class extends It{get type(){return"points"}copy(){return Wt(he,this)}toHiccup(){return["points",this.attribs,this.points]}};var pt=class extends It{get type(){return"poly"}copy(){return Wt(pt,this)}toHiccup(){return["polygon",this.attribs,this.points]}};var[at,Wo,Ja,tm]=L(Mo("*","+"),Io,Ce);var de=class{constructor(t=[0,0],r=1,o){this.pos=t,this.attribs=o,this.size=O(r)?[r,r]:r}get type(){return"rect"}copy(){return new de(ue([],this.pos),ue([],this.size),R(this))}max(){return Xt([],this.pos,this.size)}toHiccup(){return["rect",this.attribs,this.pos,this.size[0],this.size[1]]}};var mt=-Infinity,ft=Infinity,cm=Object.freeze([mt,mt]),lm=Object.freeze([ft,ft]),pm=Object.freeze([1,1]),Fe=Object.freeze([0,0]),am=Object.freeze([1,0]),mm=Object.freeze([0,1]),fm=Object.freeze([mt,mt,mt]),um=Object.freeze([ft,ft,ft]),hm=Object.freeze([1,1,1]),Zo=Object.freeze([0,0,0]),dm=Object.freeze([1,0,0]),gm=Object.freeze([0,1,0]),xm=Object.freeze([0,0,1]),bm=Object.freeze([mt,mt,mt,mt]),ym=Object.freeze([ft,ft,ft,ft]),_m=Object.freeze([1,1,1,1]),Sm=Object.freeze([0,0,0,0]),Am=Object.freeze([1,0,0,0]),jm=Object.freeze([0,1,0,0]),vm=Object.freeze([0,0,1,0]),Em=Object.freeze([0,0,0,1]);var[et,Im,Om,wm]=Ht("-");var Ve=e=>e[e.length-1];var Yo=Object.getPrototypeOf,H=e=>{let t;return e!=null&&typeof e=="object"&&((t=Yo(e))===null||Yo(t)===null)};var cc=e=>H(Ve(e))?e.pop():void 0,Qo=e=>{let t=cc(e);return e.length?e.length===2?[e[0],e[1],t]:[void 0,e[0],t]:[void 0,void 0,t]};var Ko=(e,t,r)=>(!e&&(e=[]),e[0]=t,e[1]=r,e),Jo=(e,t,r,o)=>(!e&&(e=[]),e[0]=t,e[1]=r,e[2]=o,e),X=(e,t,r,o,n)=>(!e&&(e=[]),e[0]=t,e[1]=r,e[2]=o,e[3]=n,e);var Cr=e=>ze.add(e,ct(e,Re,"a,b",void 0,"","+","return ",";")),ze=D();ze.default(Tt($o,"a,b",void 0,"s","let s=0;"));var Vm=Cr(2),zm=Cr(3),Um=Cr(4);var Dr=e=>Z.add(e,ct(e,([t])=>`${t}*${t}`,"a","a","","+","return ",";")),Z=D();Z.default(Tt(([e])=>`sum+=${e}*${e};`,"a",void 0,"sum","let sum=0;"));var tn=Dr(2),Xm=Dr(3),Wm=Dr(4);var en=e=>Math.sqrt(Z(e));var lc=Math.abs;var Ot=(e,t,r=S)=>lc(e-t)<=r;var Rr=e=>wt.add(e,Vo(e,[Ot,S],([t,r])=>`eq(${t},${r},eps)`,"eq,_eps","a,b,eps=_eps","a,b","","&&","return a.length === b.length && ",";")),wt=D();wt.default((e,t,r=S)=>T(e,"eqDelta")?e.eqDelta(t,r):T(t,"eqDelta")?t.eqDelta(e,r):pc(e,t,e.length,r));var Mr=Rr(2),sf=Rr(3),cf=Rr(4),pc=(e,t,r,o=S,n=0,i=0,s=1,c=1)=>{for(;r>0;r--,n+=s,i+=c)if(!Ot(e[n],t[i],o))return!1;return!0};var[_t,af,mf,ff]=Me("*");var rn=(e,t,r,o,n,i=!1,s=!1)=>new Yt(e,O(t)?[t,t]:t,r,o,n,i,s);var[ge,yf,_f,Sf]=L(Ro("+","*"),De);var on=(e,t,r,o=S)=>{let n=e[0],i=e[1],s=t[0],c=t[1],l=r[0],p=r[1],a=s-n,f=c-i,m=l-s,u=p-c,d=Math.abs(f),h=Math.abs(u);if(d<o&&h<o||Math.abs(a)<o&&Math.abs(m)<o)return;let g=(n+s)/2,_=(i+c)/2,b=(s+l)/2,y=(c+p)/2;if(d<o)return[g,-m/u*(g-b)+y];if(h<o)return[b,-a/f*(b-g)+_];let A=-a/f,z=-m/u,nt=g,it=_,J=b,C=y,dt=(A*nt-z*J+C-it)/(A-z),Bs=d>h?A*(dt-nt)+it:z*(dt-J)+C;return[dt,Bs]};var nn=([e,t])=>`t=${e}-${t};s+=t*t;`,sn="let t,s=0;",$r=e=>Y.add(e,ct(e,nn,"a,b",void 0,"s","",sn)),Y=D();Y.default(Tt(nn,"a,b",void 0,"s",sn));var ac=$r(2),mc=$r(3),fc=$r(4);var Ue=(e,t)=>Math.sqrt(Y(e,t));var[k,cn,Cf,Df]=L(qo,De);var xe=e=>e-Math.floor(e);var ln=(e,t=S)=>{let r=xe(e);return r<=t||r>=1-t?Math.round(e):e};var be=(e,t)=>[x([],e),k([],e,t,1/3),k([],t,e,1/3),x([],t)];var pn=(e,t,r,o,n)=>{let i=yt(e,t,r,o),s=yt(e,t,r,n),c=n-o,[l,p]=t,[a,f]=Pe(r),m=f*(i[0]-s[0])/2+a*(i[1]-s[1])/2,u=-a*(i[0]-s[0])/2+f*(i[1]-s[1])/2;if(Math.abs(c)<B&&m===0&&u===0||tn(t)<S)return[be(i,s)];let d=(y,A)=>(y*=l,A*=p,[f*y-a*A+e[0],a*y+f*A+e[1]]),h=[],g=Math.ceil(ln(Math.abs(c)/wr,.001)),_=c/g,b=8/6*Math.tan(.25*_);if(!isFinite(b))return[be(i,s)];for(let y=g,A=o,z=Pe(A);y>0;y--,A+=_){let[nt,it]=z,[J,C]=z=Pe(A+_);h.push([d(it,nt),d(it-nt*b,nt+it*b),d(C+J*b,J-C*b),d(C,J)])}return h};var an=(e,t,r)=>[x([],e),k([],e,t,2/3),k([],r,t,2/3),x([],r)];var mn=e=>pn(e.pos,e.r,e.axis,e.start,e.end).map(t=>new lt(t,R(e))),fn=(e,t,r)=>new lt(be(e,t),r),un=(e,t,r,o)=>new lt(an(e,t,r),o);var hn=(e={},t)=>new Qt(e,t);var dn=(e,t,r,o,n=[],i=[])=>{let s=uc(e[0],e[1],t[0],t[1],r[0],r[1],o[0],o[1]);if(!!s)return n[0]=s[0],n[1]=s[1],i[0]=s[2],i[1]=s[3],[n,i,s[4],s[5]]},uc=(e,t,r,o,n,i,s,c)=>{let l=r-e,p=o-t,a=0,f=1,m=(u,d)=>{if(u<0){let h=d/u;if(h>f)return!1;h>a&&(a=h)}else if(u>0){let h=d/u;if(h<a)return!1;h<f&&(f=h)}else if(d<0)return!1;return!0};return m(-l,e-n)&&m(l,s-e)&&m(-p,t-i)&&m(p,c-t)?[a*l+e,a*p+t,f*l+e,f*p+t,a,f]:void 0};var gn=()=>e=>{let t=e[2];return gt(e,(r,o)=>{if(o){for(let n of G(o))if(r=t(r,n),v(r))break}return v(o)?Ut(r):r})};function St(e,t){return U(t)?xt(St(e),t):st(E(e),gn())}var Ge;(function(e){e[e.FINE=0]="FINE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.SEVERE=4]="SEVERE",e[e.NONE=5]="NONE"})(Ge||(Ge={}));var te=Object.freeze({level:Ge.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});var xn=te;var kt=Symbol();function ee(e,t,r){let o={},n=t?hc(t):{},i=(...s)=>{let c=e(...s),l=o[c]||Be(o,n,c)||o[kt];return l?l(...s):Bt(`missing implementation for: "${c.toString()}"`)};return i.add=(s,c)=>(o[s]&&xn.warn(`overwriting '${s.toString()}' impl`),o[s]=c,!0),i.addAll=s=>{let c=!0;for(let l in s)c=i.add(l,s[l])&&c;return kt in s&&i.setDefault(s[kt]),c},i.setDefault=s=>i.add(kt,s),i.remove=s=>o[s]?(delete o[s],!0):!1,i.callable=(...s)=>{let c=e(...s);return!!(o[c]||Be(o,n,c)||o[kt])},i.isa=(s,c)=>{let l=n[s];!l&&(n[s]=l=new Set),l.add(c)},i.impls=()=>{let s=new Set(Object.keys(o));for(let c in n)Be(o,n,c)&&s.add(c);return o[kt]&&s.add(kt),s},i.rels=()=>n,i.parents=s=>n[s],i.ancestors=s=>new Set(bn([],n,s)),i.dependencies=function*(){for(let s in n)for(let c of n[s])yield[s,c];for(let s in o)!n[s]&&(yield[s,void 0])},r&&i.addAll(r),i}var Be=(e,t,r)=>{let o=t[r];if(!!o)for(let n of o){let i=e[n]||Be(e,t,n);if(i)return i}},bn=(e,t,r)=>{let o=t[r];if(o)for(let n of o)e.push(n),bn(e,t,n);return e},hc=e=>{let t={};for(let r in e){let o=e[r];t[r]=o instanceof Set?o:Array.isArray(o)?new Set(o):new Set([o])}return t};var At=(e,t,r=1)=>{!e&&(e=t);let o=en(t);return o>=S?_t(e,t,r/o):e!==t?x(e,t):e};var re=(e,t,r,o=1)=>At(null,et(e||t,r,t),o);var Lr=(e,t)=>Ko(e||t,t[1],-t[0]);var Pr=(e,t,r,o,n=1)=>(!e&&(e=[]),At(e,ge(e,At(e,et(e,t,r)),At(null,et([],o,r)),.5),n));var yn=(e,t=S)=>e>t?1:e<-t?-1:0;var ut=(e,t,r)=>{let o=e[0],n=e[1];return(t[0]-o)*(r[1]-n)-(r[0]-o)*(t[1]-n)};var Ct=(e,t,r,o=S)=>yn(ut(e,t,r),o);var _n=(e,t,r)=>{let o=[];for(let n=0,i=e.length-1;n<i;n++){let[s,c]=e[n],[l,p]=e[n+1],a=r?t:t*Ue(s,l);o.push([s,at([],c,a,s),at([],p,-a,l),l])}return o},Sn=(e,t=1/3,r=!1)=>{let o=[];for(let n=e.length,i=n-1,s=0;s<n;i=s,s++){let c=e[i],l=e[s],p=e[(s+1)%n],a=_t(null,Lr(null,Pr([],c,l,p)),Ct(c,l,p));o.push([x([],l),a])}return o.push(o[0]),_n(o,t,r)},An=(e,t=1/3,r=!1)=>{let o=[[e[0],re([],e[0],e[1])]],n=e.length-1;for(let i=1;i<n;i++){let s=e[i-1],c=e[i],l=e[i+1],p=_t(null,Lr(null,Pr([],s,c,l)),Ct(s,c,l));o.push([x([],c),p])}return o.push([e[n],re([],e[n-1],e[n])]),_n(o,t,r)};var jn=(e,t)=>{let r=[];for(let o=0,n=e.length-2;o<n;o+=2){let i=e[o],s=e[o+1],c=e[o+2];r.push([i,fe(null,re([],i,s,t),i),fe(null,re([],c,s,t),c),c])}return r},vn=(e,t)=>{let r=[];for(let o=0,n=e.length-2;o<n;o+=2){let i=e[o],s=e[o+1],c=e[o+2];r.push([i,k([],i,s,t),k([],c,s,t),c])}return r},En=(e,t=1,r=!1)=>{let o=[];for(let n=0,i=e.length;n<i;n++){let s=e[(n+1)%i];o.push(ge([],e[n],s,.5),x([],s))}return o.push(o[0]),r?jn(o,t):vn(o,t)},Nn=(e,t=1,r=!1)=>{let o=[x([],e[0]),x([],e[0])],n=e.length-1;for(let i=0;i<n;i++){let s=e[i+1];o.push(ge([],e[i],s,.5),x([],s))}return o.push(x([],e[n])),r?jn(o,t):vn(o,t)};var oe=e=>e.type;var rt=Array.isArray;var P=20;var[ph,ah,mh,fh]=L(Po,"a,n","a","a",0,"");var Tn=e=>new Array(e).fill(0);var ye=e=>T(e,"empty")?e.empty():Tn(e.length);var _e=(e,t,r)=>{let o=et([],r,t),n=Z(o);return n>1e-6?ze(et([],e,t),o)/n:void 0};var Dt=(e,t,r,o,n=!1,i=0)=>{let s=_e(e,t,r);if(s!==void 0&&(!n||s>=i&&s<=1-i))return o=o||ye(e),s<=0?x(o,t):s>=1?x(o,r):k(o,t,r,s)};var In=(e,t,r=!1,o=[])=>{if(!t.length)return;let n=[],i=t.length-1,s=Infinity,c,l;for(r?(c=i,l=0):(c=0,l=1);l<=i;c=l,l++)if(Dt(e,t[c],t[l],n)){let p=Y(e,n);p<s&&(s=p,x(o,n))}return s<Infinity?o:void 0},On=(e,t,r,o=0,n=r.length)=>{let i=-1,s=-1,c=ye(e);for(let l=o;l<n;l++){let p=r[l],a=Y(p,Dt(p,e,t,c)||e);a>i&&(i=a,s=l)}return[s,Math.sqrt(i)]};var Rt=class{constructor(t,r=!1){r?(this.points=t.slice(),this.points.push(t[0])):this.points=t,this.buildIndex()}totalLength(){let t=this.index;return t?t[t.length-1]:0}pointAt(t){let r=this.points,o=r.length-1;if(o<0)return;if(o===0||t<=0)return r[0];if(t>=1)return r[o];let n=this.index,i=t*n[o];for(let s=1;s<=o;s++)if(n[s]>=i)return k([],r[s-1],r[s],(i-n[s-1])/(n[s]-n[s-1]))}closestPoint(t){return In(t,this.points)}closestT(t){let{index:r,points:o}=this,n=[],i=[],s=Infinity,c=-1;for(let l=0,p=r.length-1;l<p;l++)if(Dt(t,o[l],o[l+1],n)){let a=Y(t,n);a<s&&(s=a,c=l,x(i,n))}return c>=0?qe(_e(t,o[c],o[c+1])||0,r[c],r[c+1])/this.totalLength():void 0}segmentAt(t){let r=this.indexAt(t);if(r!==void 0)return r=Math.max(1,r),[this.points[r-1],this.points[r]]}tangentAt(t,r=1){let o=this.segmentAt(t);return o?At(null,et([],o[1],o[0]),r):void 0}splitAt(t){if(t<=0||t>=1)return[this.points];let r=this.pointAt(t);if(!r)return;let o=Math.max(1,this.indexAt(t)),n=this.points.slice(0,o),i=this.points.slice(o);return wt(n[o-1],r)||n.push(r),wt(i[0],r)||i.unshift(r),[n,i]}splitNear(t){let r=this.closestT(t);return r!==void 0?this.splitAt(r):void 0}indexAt(t){let o=this.points.length-1;if(o<0)return;if(o===0||t<=0)return 0;if(t>=1)return o;let n=this.index,i=t*n[o];for(let s=1;s<=o;s++)if(n[s]>=i)return s}sampleUniform(t,r=!1,o=[]){let{index:n,points:i}=this,s=this.totalLength(),c=t/s,l=n.length;for(let p=0,a=1;p<1;p+=c){let f=p*s;for(;f>=n[a]&&a<l;)a++;if(a>=l)break;let m=n[a-1];o.push(k([],i[a-1],i[a],(f-m)/(n[a]-m)))}return r&&o.push(x([],i[i.length-1])),o}sampleFixedNum(t,r=!1,o){return this.sampleUniform(this.totalLength()/t,r,o)}buildIndex(){let t=[0],r=this.points,o=r.length;for(let n=0,i=1;i<o;n=i,i++)t[i]=t[n]+Ue(r[n],r[i]);this.index=t}};var wn=Math.cos,kn=Math.sin,Cn=D(1),He=Cn.add(2,(e,t,r=Fe)=>Wo(e||t,Zt(t[1]),t[0],r)),Fh=Cn.add(3,(e,t,r=Zo)=>{let o=t[0],n=t[1],i=t[2],s=wn(n);return Jo(e||t,o*s*wn(i)+r[0],o*s*kn(i)+r[1],o*kn(n)+r[2])});var qr=(e,t,r,o,n,i)=>{if(H(i)&&i.dist!==void 0)return new Rt(qr(e,t,r,o,n,i.num||P)).sampleUniform(i.dist,i.last!==!1);i=O(i)?{num:i,last:!0}:{num:P,...i};let s=n-o,c=i.theta?Math.round(s/i.theta):i.num;s/=c,i.last!==!1&&c++;let l=new Array(c);for(let p=0;p<c;p++)l[p]=yt(e,t,r,o+p*s);return l};var Fr=(e,t,r=!1,o=!1)=>{if(t!==void 0){let n=new Rt(e,r);return H(t)?r?t.dist?n.sampleUniform(t.dist,t.last):n.sampleFixedNum(t.num||P,t.last):t.dist?n.sampleUniform(t.dist,t.last!==!1):n.sampleFixedNum(t.num||P,t.last!==!1):n.sampleFixedNum(t||P,!r)}return o?$e(e):e};var Dn=(e,t,r,o,n,i,s)=>(!e&&(e=t),at(e,o,s,at(e,r,i,_t(e,t,n)))),Rn=(e,t,r,o,n,i,s,c,l)=>(!e&&(e=t),at(e,n,l,at(e,o,c,at(e,r,s,_t(e,t,i)))));var Mn=(e,t,r,o,n,i)=>{let s=1-i,c=s*s,l=i*i;return Rn(e,t,r,o,n,c*s,3*c*i,3*l*s,l*i)};var Xe=e=>function t(r,o){if(H(o)&&o.dist!==void 0)return new Rt(t(r,o.num||P)).sampleUniform(o.dist,o.last!==!1);o=O(o)?{num:o,last:!0}:{num:P,...o};let n=[];return e(n,r,o.num),o.last&&n.push(x([],r[r.length-1])),n},We=e=>(t,r=!1,o)=>{let n=O(o)?{num:o}:o,i=t.length-1;return Array.prototype.concat.apply([],t.map((s,c)=>e(s,{...n,last:!r&&c===i})))};var Vr=Xe((e,[t,r,o,n],i)=>{let s=1/i;for(let c=0;c<i;c++)e.push(Mn([],t,r,o,n,c*s))}),fd=We(Vr);var $n=(e,t,r,o,n)=>{let i=1-n;return Dn(e,t,r,o,i*i,2*i*n,n*n)};var zr=Xe((e,[t,r,o],n)=>{let i=1/n;for(let s=0;s<n;s++)e.push($n([],t,r,o,s*i))}),bd=We(zr);var[Ad,Ln,jd,vd]=L(Do("*","+"),No);var Mt=ee(oe,{line:"polyline",points3:"points",quad:"poly",tri:"poly"},{aabb:({pos:e,size:t})=>{let[r,o,n]=e,[i,s,c]=zo([],e,t);return[[r,o,n],[r,o,c],[i,o,c],[i,o,n],[r,s,n],[r,s,c],[i,s,c],[i,s,n]]},arc:(e,t)=>qr(e.pos,e.r,e.axis,e.start,e.end,t),circle:(e,t=P)=>{let r=e.pos,o=e.r,[n,i]=Pn(t,o),s=j/n;i&&n++;let c=new Array(n);for(let l=0;l<n;l++)c[l]=He(null,[o,l*s],r);return c},cubic:(e,t)=>Vr(e.points,t),ellipse:(e,t=P)=>{let r=[],o=e.pos,n=e.r,[i,s]=Pn(t,Math.max(e.r[0],e.r[1])),c=j/i;s&&i++;for(let l=0;l<i;l++)r[l]=Ln([],Zt(l*c),n,o);return r},group:({children:e})=>e.reduce((t,r)=>t.concat(Mt(r)),[]),path:(e,t)=>{let r=O(t)?{num:t}:t,o=[];for(let n=e.segments,i=n.length-1,s=0;s<=i;s++){let c=n[s];c.geo&&(o=o.concat(Mt(c.geo,{...r,last:s===i&&!e.closed})))}return o},points:e=>e.points,poly:(e,t)=>Fr(e.points,t,!0),polyline:(e,t)=>Fr(e.points,t),quadratic:(e,t)=>zr(e.points,t),rect:(e,t)=>{let r=e.pos,o=Xt([],r,e.size),n=[ue([],r),[o[0],r[1]],o,[r[0],o[1]]];return t!=null?Mt(new pt(n),t):n}});var Pn=(e,t)=>O(e)?[e,!1]:[e.theta?Math.floor(j/e.theta):e.dist?Math.floor(j/(e.dist/t)):e.num||P,e.last===!0];var qn=ee(oe,{circle:"points",ellipse:"points",line:"points",path:"points",poly:"points",polyline:"points",quad:"points",rect:"points",tri:"points"},{points:(e,t)=>new pt(Mt(e,t),R(e))});var ne=ee(oe,{ellipse:"circle",quad:"poly",tri:"poly"},{arc:mn,circle:e=>ne(rn(e.pos,e.r,0,0,j,!0,!0)),cubic:e=>[e],group:e=>[...St(ne,e.children)],line:({attribs:e,points:t})=>[fn(t[0],t[1],{...e})],path:e=>[...St(t=>t.geo?ne(t.geo):null,e.segments)],poly:(e,t={})=>Fn(e,t,Sn,En),polyline:(e,t={})=>Fn(e,t,An,Nn),quadratic:({attribs:e,points:t})=>[un(t[0],t[1],t[2],{...e})],rect:(e,t)=>ne(qn(e),t)}),Fn=(e,t,r,o)=>(t={breakPoints:!1,scale:1/3,uniform:!1,...t},(t.breakPoints?r(e.points,t.scale,t.uniform):o(e.points,t.scale,t.uniform)).map(n=>new lt(n,R(e))));var Vn=(e,t)=>{let r=new Jt([],t||e[0].attribs);r.segments.push({type:"m",point:e[0].points[0]});for(let o of e)r.segments.push({type:"c",geo:o});return r};var zn=(e,t)=>new he(e,t);function*Un(e,t=Infinity){if(t<1)return;let r=[];for(let o of e)r.push(o),yield o;if(r.length>0)for(;--t>0;)yield*r}function*Gn(e,t=!0){if(e>0)for(let r=0,o=t?e+1:e;r<o;r++)yield r/e}var Bn=(e,t)=>new pt(e,t);var Ur=e=>ct(e,Re,`o,a,${Oo}`,"o,a","","+","return ",";",!0),x0=Ur(2),Ze=Ur(3),dc=Ur(4);var gc=tt(()=>"illegal argument(s)"),Ye=e=>{throw new gc(e)};var[Hn,A0,j0,v0]=Me("/");var Se=(e,t)=>{let r=e.length;!r&&Ye("no points"),!t&&(t=ye(e[0]));for(let o=r;o-- >0;)fe(t,t,e[o]);return Hn(t,t,r)};function Xn(...e){return new de(...Qo(e))}var Q=e=>typeof e=="string";var xc=tt(()=>"Assertion failed"),ot=(()=>typeof process!="undefined"&&typeof process.env!="undefined"?process.env.NODE_ENV!=="production"||!!process.env.UMBRELLA_ASSERTS:typeof __SNOWPACK_ENV__!="undefined"?__SNOWPACK_ENV__.MODE!=="production"||!!__SNOWPACK_ENV__.UMBRELLA_ASSERTS||!!__SNOWPACK_ENV__.SNOWPACK_PUBLIC_UMBRELLA_ASSERTS:!0)()?(e,t)=>{if(typeof e=="function"&&!e()||!e)throw new xc(typeof t=="function"?t():t)}:()=>{};var Gr={};var Wn=(e,t,r,o)=>{let n=Gr[r];ot(!!n,`no conversions available for ${r}`);let i=n[o];return i?i(e,t):Gr.rgb[o]?n.rgb(e,Gr.rgb[o]([],t)):Bt(`can't convert: ${o} -> ${r}`)};function ht(e,t){return!t&&(t={}),(...r)=>{let o=JSON.stringify(r);return o!==void 0?o in t?t[o]:t[o]=e.apply(null,r):e.apply(null,r)}}var Qe=ht((e,t)=>e.repeat(t));var Ae=ht((e,t=" ")=>{let r=Qe(String(t),e);return(o,n)=>o==null?r:(o=o.toString(),n=n!==void 0?n:o.length,n<e?r.substr(n)+o:o)}),B0=Ae(2,"0"),H0=Ae(3,"0"),X0=Ae(4,"0");var Yn=ht((e,t=!1)=>t?r=>Zn(r)||r.toFixed(e):r=>r.toFixed(e)),Q0=ht((e,t=3)=>{let r=e-t-1,o=Math.pow(10,r),n=-Math.pow(10,r-1),i=Math.pow(10,-(t-1)),s=Ae(e);return c=>{let l=Math.abs(c);return s(Zn(c)||(c===0?"0":l<i||l>=o?bc(c,e):c.toFixed(t-(c<n?1:0))))}}),bc=(e,t)=>e.toExponential(Math.max(t-4-(Math.log(Math.abs(e))/Math.LN10>=10?2:1)-(e<0?1:0),0)),Zn=e=>isNaN(e)?"NaN":e===Infinity?"+\u221E":e===-Infinity?"-\u221E":void 0;var Qn=(e=0)=>t=>(t*100).toFixed(e)+"%";var rg=Object.freeze([0,0,0,1]),og=Object.freeze([1,1,1,1]),ng=Object.freeze([1,0,0,1]),ig=Object.freeze([0,1,0,1]),sg=Object.freeze([0,0,1,1]),cg=Object.freeze([0,1,1,1]),lg=Object.freeze([1,0,1,1]),pg=Object.freeze([1,1,0,1]);var Kn=[3.1338561,-.9787684,.0719453,-1.6168667,1.9161415,-.2289914,-.4906146,.033454,1.4052427];var Jn=[3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252];var ti=[.96422,1,.82521],ei=[.95047,1,1.08883];var $t=Yn(3),Br=Qn(3);var ri=1/255,ag=1/256;var q=(e,t=1)=>e!=null?w(e):t;var Ke=e=>{let t=$t(xe(e[0])*360),r=Br(w(e[1])),o=Br(w(e[2])),n=q(e[3]);return n<1?`hsla(${t},${r},${o},${$t(n)})`:`hsl(${t},${r},${o})`};var oi=(e,t,r=1)=>X(e||t,xe(t[0]),w(t[1]),w(t[2]),q(t[3],r));var ni=(e,t)=>{e=oi(e||t,t);let r=e[1],o=e[2],n=(2-r)*o/2;return e[2]=n,e[1]=n&&n<1?r*o/(n<.5?n*2:2-n*2):r,e};var ii=e=>Ke(ni([],e));var si="0123456789abcdef";var Je=e=>si[e>>>4&15]+si[e&15];var ci=e=>Je(e>>>8)+Je(e&255);var li=e=>Je(e>>>16)+ci(e);var Hr=ht((e,t,r="")=>{let o=Qe("0",t);return n=>(n=(n>>>0).toString(e),r+(n.length<t?o.substr(n.length)+n:n))}),Mg=Hr(2,8),$g=Hr(2,16),pi=Hr(2,32);var tr=li;var er=e=>{let t=e>>>24;return t<255?`rgba(${e>>16&255},${e>>8&255},${e&255},${$t(t*ri)})`:`#${tr(e&16777215)}`};var ai=e=>(e&255)<<16|e>>16&255|e&4278255360;var mi=ai;var fi=(e,t)=>{let{1:r,2:o}=t;o*=j;let n=q(t[3]);return r>0?X(e||t,t[0],Math.cos(o)*r,Math.sin(o)*r,n):X(e||t,t[0],0,0,n)};var Xr=e=>{let t=e**3;return t>.008856?t:(e-16/116)/7.787},Wr=(e,t,r=ti)=>{let o=(t[0]+.16)/1.16;return X(e||t,Xr(t[1]/5+o)*r[0],Xr(o)*r[1],Xr(o-t[2]/2)*r[2],q(t[3]))},ui=(e,t)=>Wr(e,t,ei);var hi=(e,t,r,o=!1)=>{let n=Ze(t,r,0,0,3),i=Ze(t,r,1,0,3),s=Ze(t,r,2,0,3),c=q(r[3]);return o?X(e||r,w(n),w(i),w(s),c):X(e||r,n,i,s,c)};var Zr=(e,t,r=Kn)=>hi(e,r,t),di=(e,t)=>Zr(e,t,Jn);var Yr=(e,t)=>Zr(null,Wr(e,t)),gi=(e,t)=>di(null,ui(e,t));var rr=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;var ie=(e,t)=>X(e||t,rr(t[0]),rr(t[1]),rr(t[2]),q(t[3])),u1=1/2.2;var or=(e,t=0)=>(e<0?0:e>1?1:e)*255+.5<<t;var jt=e=>{let t=or(e[0]),r=or(e[1]),o=or(e[2]),n=q(e[3]);return n<1?`rgba(${t},${r},${o},${$t(n)})`:`#${tr(t<<16|r<<8|o)}`};var xi=e=>jt(ie([],e));var bi={abgr32:e=>er(mi(e[0])),argb32:e=>er(e[0]),hsl:Ke,hsv:ii,lab50:e=>jt(ie(null,Yr([],e))),lab65:e=>jt(ie(null,gi([],e))),lch:e=>jt(ie(null,Yr(null,fi([],e)))),rgb:xi,srgb:jt},yi=e=>{let t;return Q(e)?e:O(e)?er(e):e.mode?(t=bi[e.mode])?t(e):bi.rgb(Wn([],e,"rgb",e.mode)):jt(e)};var _i="http://www.w3.org/2000/svg";var yc=e=>e!=null&&typeof e.deref=="function",se=e=>yc(e)?e.deref():e;var ce=e=>typeof e=="function";var le=e=>e!=null&&typeof e!="string"&&typeof e[Symbol.iterator]=="function";var Si=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/;var Ai={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},Qr=e=>e.split(" ").reduce((t,r)=>(t[r]=!0,t),{}),ji=Qr("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view"),V1=Qr("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml"),z1=Qr("animate circle ellipse line path polygon polyline rect");var vi=e=>{let t="",r;for(let o in e)r=se(e[o]),ce(r)&&(r=r(e)),r!=null&&(t+=`${o}:${r};`);return t};var Ei=(e,t)=>{if(t=se(t),t==null)return e;if(Q(t))return e+" "+t;let r=new Set(e.split(" "));for(let o in t)se(t[o])?r.add(o):r.delete(o);return[...r].join(" ")},Ni=(e,t,r)=>{t&&(e.id=t);let o=se(e.class);return r?(r=r.replace(/\./g," "),e.class=o?Ei(r,o):r):o&&(e.class=Q(o)?o:Ei("",o)),e};var Ti=e=>Object.keys(e).reduce((t,r)=>(t.push(`${r}: ${e[r]}`),t),[]).join(" ");var Ii=(e,t,r,o=S)=>{let n=_e(e,t,r);return n!==void 0?Y(e,k([],t,r,w(n)))<o*o:!1};var Oi=(e,t,r,o)=>Z(e)*ut(t,r,o)-Z(t)*ut(e,r,o)+Z(r)*ut(e,t,o)-Z(o)*ut(e,t,r)>0;var je=(e,t)=>{let r=t.length-1,o=e[0],n=e[1],i=t[r],s=t[0],c=0;for(let l=0;l<=r;i=s,s=t[++l])c=_c(o,n,i[0],i[1],s[0],s[1],c);return c},_c=(e,t,r,o,n,i,s)=>(o<t&&i>=t||i<t&&o>=t)&&(r<=e||n<=e)?s^(r+(t-o)/(i-o)*(n-r)<e?1:0):s,Kr=D(0),ix=Kr.add(2,([e,t],r,o)=>e>=r[0]&&e<=r[0]+o[0]&&t>=r[1]&&t<=r[1]+o[1]),sx=Kr.add(3,([e,t,r],o,n)=>e>=o[0]&&e<=o[0]+n[0]&&t>=o[1]&&t<=o[1]+n[1]&&r>=o[2]&&r<=o[2]+n[2]);Kr.default((e,t,r)=>{for(let o=e.length;o-- >0;){let n=e[o],i=t[o];if(n<i||n>i+r[o])return!1}return!0});var Jr=D(0),cx=Jr.add(2,([e,t],r,o)=>e>=r[0]-o[0]&&e<=r[0]+o[0]&&t>=r[1]-o[1]&&t<=r[1]+o[1]),lx=Jr.add(3,([e,t,r],o,n)=>e>=o[0]-n[0]&&e<=o[0]+n[0]&&t>=o[1]-n[1]&&t<=o[1]+n[1]&&r>=o[2]-n[2]&&r<=o[2]+n[2]);Jr.default((e,t,r)=>{for(let o=e.length;o-- >0;){let n=e[o],i=t[o],s=r[o];if(n<i-s||n>i+s)return!1}return!0});var vt;(function(e){e[e.NONE=0]="NONE",e[e.PARALLEL=1]="PARALLEL",e[e.COINCIDENT=2]="COINCIDENT",e[e.COINCIDENT_NO_INTERSECT=3]="COINCIDENT_NO_INTERSECT",e[e.INTERSECT=4]="INTERSECT",e[e.INTERSECT_OUTSIDE=5]="INTERSECT_OUTSIDE"})(vt||(vt={}));var to=(e,t,r,o,n=S)=>{let i=t[0]-e[0],s=t[1]-e[1],c=o[0]-r[0],l=o[1]-r[1],p=e[0]-r[0],a=e[1]-r[1],f=l*i-c*s,m=c*a-l*p,u=i*a-s*p;if(Ot(f,0,n)){if(Ot(m,0,n)&&Ot(u,0,n)){let h=Dt(r,e,t,void 0,!0)||Dt(o,e,t,void 0,!0);return{type:h?vt.COINCIDENT:vt.COINCIDENT_NO_INTERSECT,isec:h}}return{type:vt.PARALLEL}}m/=f,u/=f;let d=1-n;return{type:n<m&&m<d&&n<u&&u<d?vt.INTERSECT:vt.INTERSECT_OUTSIDE,isec:cn([],e,t,m),alpha:m,beta:u,det:f}};var eo=(e,t,r,o=S)=>{r=r||Se(t);for(let n=t.length,i=n-1,s=0;s<n;i=s,s++){let c=[],l=t[i],p=t[s],a=Ct(l,p,r,o);for(let f=e.length,m=f-1,u=0;u<f;m=u,u++){let d=e[m],h=e[u],g=Ct(l,p,h,o);Ct(l,p,d,o)===a?c.push(g!==a?to(l,p,d,h).isec:h):g===a&&c.push(to(l,p,d,h).isec,h)}if(c.length<2)return[];e=c}return e};var wi=(e,t=0,r=!1)=>{let o=e.length,n=[];if(o<=2)return e.slice();r&&!wt(e[0],e[o-1],S)&&(e=e.slice(),e.push(e[0]),o++);let i=(c,l)=>{if(n[c]=n[l]=!0,l<=c+1)return;let[p,a]=On(e[c],e[l],e,c+1,l);p<0||a<=t||(i(c,p),i(p,l))};i(0,o-1);let s=[];for(let c=0,l=r?o-1:o;c<l;c++)n[c]&&s.push(e[c]);return s};function ve(...e){return e.length>2&&bt(ve,e,xt)||(([t,r,o])=>{let[n,i,s]=e[0],c=e.length>1&&e[1]!=null?e[1]:n();return[t,l=>{let p=i(c);return p!==c&&(l=G(o(l,p))),c=p,r(l)},(l,p)=>(c=s(c,p),v(c)?Ut(o(l,c.deref())):o(l,c))]})}function*ki(e,t,r){if(e===void 0?(e=0,t=Infinity):t===void 0&&(t=e,e=0),r=r===void 0?e<t?1:-1:r,r>0)for(;e<t;)yield e,e+=r;else if(r<0)for(;e>t;)yield e,e+=r}var ro=(e,t)=>(t--,e+t&~t);var Ci=e=>~e,Di=(e,t)=>e&t;var Ri=(e,t)=>e|t;var Mi=(e,t)=>e^t;var $i=e=>(e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24);var Li=e=>[...e].map(pi).join(""),Pi=(e,t,r)=>{for(let o=t.length;o-- >0;)e[o]=r(t[o],e[o])},qi=(e,t=0,r=e.length)=>{let o=0;for(let n=t+r;t<n;t++){let i=e[t];i>0&&(o+=$i(i))}return o};var nr=class{constructor(t){let r=typeof t=="number";this.n=ro(r?t:t.length,32),this.data=new Uint32Array(this.n>>>5),!r&&this.setRange(0,t)}clear(){this.data.fill(0)}copy(){let t=new nr(this.n);return t.data.set(this.data),t}resize(t){if(t=ro(t,32),t===this.n)return this;let r=new Uint32Array(t>>>5);return r.set(this.data.slice(0,r.length)),this.data=r,this.n=t,this}at(t){return this.data[t>>>5]&1<<(~t&31)}setAt(t,r=!0){let o=t>>>5,n=1<<(~t&31),i=this.data[o]&n;return r?this.data[o]|=n:this.data[o]&=~n,i}setRange(t,r){let o=typeof r=="string";for(let n=0,i=Math.min(this.n,n+r.length);n<i;n++)this.setAt(t+n,o?r[n]==="1":r[n])}toggleAt(t){let r=t>>>5,o=1<<(~t&31),n=this.data[r]&o;return n?this.data[r]&=~o:this.data[r]|=o,n}popCount(){return qi(this.data)}and(t){return this.binOp(t,Di)}or(t){return this.binOp(t,Ri)}xor(t){return this.binOp(t,Mi)}not(){return this.binOp(this,Ci)}toString(){return Li(this.data)}binOp(t,r){return this.ensureSize(t),Pi(this.data,t.data,r),this}ensureSize(t){ot(t.n===this.n,"fields must be same size")}},ir=e=>new nr(e);function pe(e,t,r){ot((e&3)==0,"id must be multiple of 4");let o=new Array(4),n=o[0]=new Ee(o,e),i=o[1]=new Ee(o,e+1),s=o[2]=new Ee(o,e+2),c=o[3]=new Ee(o,e+3);return n.onext=n,s.onext=s,i.onext=c,c.onext=i,t&&r&&n.setEnds(t,r),n}var Ee=class{constructor(t,r){this.parent=t,this.id=r}get oprev(){return this.rot.onext.rot}get rot(){return this.parent[this.id+1&3]}get invrot(){return this.parent[this.id+3&3]}get sym(){return this.parent[this.id+2&3]}get dnext(){return this.sym.onext.sym}get dprev(){return this.invrot.onext.invrot}get lnext(){return this.invrot.onext.rot}get lprev(){return this.onext.sym}get rnext(){return this.rot.onext.invrot}get rprev(){return this.sym.onext}get dest(){return this.sym.origin}setEnds(t,r){this.origin=t,this.sym.origin=r}connect(t,r){let o=pe(r);return o.splice(this.lnext),o.sym.splice(t),o.setEnds(this.dest,t.origin),o}swap(){let t=this.oprev,r=this.sym.oprev;this.splice(t),this.sym.splice(r),this.splice(t.lnext),this.sym.splice(r.lnext),this.setEnds(t.dest,r.dest)}remove(){this.splice(this.oprev),this.sym.splice(this.sym.oprev),delete this.parent}splice(t){let r=this.onext.rot,o=t.onext.rot,n=t.onext,i=this.onext,s=o.onext,c=r.onext;return this.onext=n,t.onext=i,r.onext=s,o.onext=c,this}};var sr=(e,t)=>ut(e,t.dest.pos,t.origin.pos)>0,oo=class{constructor(t,r=1e5){let o={pos:[0,-r],id:0},n={pos:[r,r],id:1},i={pos:[-r,r],id:2},s=pe(0,o,n),c=pe(4,n,i),l=pe(8,i,o);s.sym.splice(c),c.sym.splice(l),l.sym.splice(s),this.first=s,this.nextEID=12,this.nextVID=3,t&&t.length?O(t[0][0])?this.addKeys(t):this.addAll(t):this.computeDual()}add(t,r,o=S,n=!0){let[i,s]=this.locate(t,o);if(s)return!1;Ii(t,i.origin.pos,i.dest.pos)&&(i=i.oprev,i.onext.remove());let c=pe(this.nextEID,i.origin,{pos:t,id:this.nextVID++,val:r});c.splice(i),this.nextEID+=4;let l=c;do c=i.connect(c.sym,this.nextEID),i=c.oprev,this.nextEID+=4;while(i.lnext!==l);do{let p=i.oprev;if(sr(p.dest.pos,i)&&Oi(i.origin.pos,p.dest.pos,i.dest.pos,t))i.swap(),i=i.oprev;else if(i.onext!==l)i=i.onext.lprev;else break}while(!0);return n&&this.computeDual(),!0}addKeys(t,r){for(let o of t)this.add(o,void 0,r,!1);this.computeDual()}addAll(t,r){for(let o of t)this.add(o[0],o[1],r,!1);this.computeDual()}locate(t,r=S){let o=this.first;for(;;){if(Mr(t,o.origin.pos,r)||Mr(t,o.dest.pos,r))return[o,!0];if(sr(t,o))o=o.sym;else if(!sr(t,o.onext))o=o.onext;else if(!sr(t,o.dprev))o=o.dprev;else return[o,!1]}}computeDual(){let t=[this.first.rot],r={},o={};for(;t.length;){let n=t.pop();if(!r[n.id]){if(r[n.id]=!0,!n.origin||!o[n.origin.id]){let i=n.rot,s=i.origin.pos,c=i.origin.id<3;i=i.lnext;let l=i.origin.pos;c=c&&i.origin.id<3,i=i.lnext;let p=i.origin.pos;c=c&&i.origin.id<3;let a=this.nextVID++;n.origin={pos:c?Fe:on(s,l,p),id:a},o[a]=!0}t.push(n.sym,n.onext,n.lnext)}}}delaunay(t){let r=[],o=ir(this.nextEID),n=t&&Se(t);return this.traverse(i=>{if(!o.at(i.id)){let s=i.lnext,c=s.lnext,l=i.origin.pos,p=s.origin.pos,a=c.origin.pos,f=[l,p,a];t&&!(je(l,t)&&je(p,t)&&je(a,t))?(f=eo(f,t,n),f.length>2&&r.push(f)):r.push(f),o.setAt(i.id),o.setAt(s.id),o.setAt(c.id)}}),r}voronoi(t){let r=[],o=t&&Se(t);return this.traverse(t?n=>{let i=n=n.rot,s=[],c=!1,l;do l=n.origin.pos,s.push(l),c=c||!je(l,t);while((n=n.lnext)!==i);c&&(s=eo(s,t,o),s.length<3)||r.push(s)}:n=>{let i=n=n.rot,s=[];do s.push(n.origin.pos);while((n=n.lnext)!==i);r.push(s)},!1),r}edges(t=!1,r){let o=[];return this.traverse((n,i)=>{if(!i.at(n.sym.id)){if(n.origin.id>2&&n.dest.id>2){let s=n.origin.pos,c=n.dest.pos;if(r){let l=dn(s,c,r[0],r[1]);l&&o.push([l[0],l[1]])}else o.push([s,c])}i.setAt(n.id)}},!0,t?this.first.rot:this.first),o}traverse(t,r=!0,o=this.first){let n=[o],i=ir(this.nextEID),s=ir(this.nextVID);for(;n.length;){if(o=n.pop(),i.at(o.id))continue;i.setAt(o.id);let c=o.origin.id;c>2&&o.rot.origin.id>2&&(r||!s.at(c))&&(s.setAt(c),t(o,i,s)),n.push(o.sym,o.onext,o.lnext)}}};var cr,lr,Sc=[],Ac=[],jc=e=>cr&&cr.length>=e?cr:cr=new Int32Array(e),vc=e=>lr&&lr.length>=e?lr:lr=new Int32Array(e);var Fi=(e,t,r,o,n)=>{let i=t.length,s=e.linear;if(e.distance=i,n!=="only-distance"){for(let c=0,l=0;c<i;c++,l+=3)s[l]=o,s[l+1]=c,s[l+2]=t[c];if(n==="full"){let c=e[r];for(let l=0;l<i;l++)c[l]=t[l]}}return e},pr=(e,t,r="full",o=I)=>{let n={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===t||e==null&&t==null)return n;if(e==null||e.length===0)return Fi(n,t,"adds",1,r);if(t==null||t.length===0)return Fi(n,e,"dels",-1,r);let i=e.length>=t.length,s,c,l,p;i?(s=t,c=e):(s=e,c=t),l=s.length,p=c.length;let a=l+1,f=p-l,m=f+a,u=l+p+3,d=vc(u).fill(-1,0,u),h=jc(u).fill(-1,0,u),g=Sc,_=Ac,b=(z,nt,it)=>{let J,C;nt>it?(J=d[z-1],C=nt):(J=d[z+1],C=it);let dt=C-(z-a);for(;dt<l&&C<p&&o(s[dt],c[C]);)dt++,C++;d[z]=_.length/3,_.push(dt,C,J),h[z]=C},y=-1,A;do{for(y++,A=-y+a;A<m;A++)b(A,h[A-1]+1,h[A+1]);for(A=m+y;A>m;A--)b(A,h[A-1]+1,h[A+1]);b(m,h[m-1]+1,h[m+1])}while(h[m]!==p);if(n.distance=f+2*y,r!=="only-distance"){for(y=d[m]*3;y>=0;)g.push(y),y=_[y+2]*3;r==="full"?Ec(g,_,n,s,c,i):Nc(g,_,n,s,c,i,r==="only-distance-linear")}return g.length=0,_.length=0,n},Ec=(e,t,r,o,n,i)=>{let s=r.linear,c=r.const,l=e.length,p=0,a=0,f,m,u,d;for(i?(f=r.dels,m=r.adds,u=-1,d=1):(f=r.adds,m=r.dels,u=1,d=-1);l-- >0;){let h=e[l],g=t[h],_=t[h+1],b=_-g;for(;p<g||a<_;){let y=a-p;b>y?(s.push(u,a,f[a]=n[a]),a++):b<y?(s.push(d,p,m[p]=o[p]),p++):(s.push(0,p,c[p]=o[p]),p++,a++)}}},Nc=(e,t,r,o,n,i,s)=>{let c=r.linear,l=i?-1:1,p=i?1:-1,a=e.length,f=0,m=0;for(;a-- >0;){let u=e[a],d=t[u],h=t[u+1],g=h-d;for(;f<d||m<h;){let _=m-f;g>_?(c.push(l,m,n[m]),m++):g<_?(c.push(p,f,o[f]),f++):(s&&c.push(0,f,o[f]),f++,m++)}}};var Vi=(e,t,r="full",o=I)=>e===t?{distance:0}:r==="only-distance"?Tc(e,t,o):Ic(e,t,o),Tc=(e,t,r)=>{e||(e={}),t||(t={});let o=0;for(let n in e){let i=t[n];(i===void 0||!r(e[n],i))&&o++}for(let n in t)!(n in e)&&o++;return{distance:o}},Ic=(e,t,r)=>{e||(e={}),t||(t={});let o=0,n=[],i=[],s=[];for(let c in e){let l=t[c];l===void 0?(i.push(c),o++):r(e[c],l)||(s.push(c,l),o++)}for(let c in t)c in e||(n.push(c),o++);return{distance:o,adds:n,dels:i,edits:s}};var ar=Array.isArray,Oc=Math.max,zi=Object.getPrototypeOf({}),mr="function",fr="string",Ui=(()=>{let e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),wc=e=>{if(e<=Ui.length)return Ui.slice(0,e);let t=new Array(e);for(;e-- >2;)t[e]=e-2;return t},no=(e,t,r,o,n,i=0)=>{let s=n[1];if(s.__skip)return;if(s.__diff===!1){Lt(o),t.replaceChild(e,r,i,n);return}let c=o[1];if(c&&c.__skip){t.replaceChild(e,r,i,n,!1);return}let l=s.__impl;if(l&&l!==t)return l.diffTree(e,l,r,o,n,i);let p=pr(o,n,"only-distance-linear",Pt);if(p.distance===0)return;let a=p.linear,f=t.getChild(r,i),m,u,d,h;if(a[0]!==0||o[1].key!==s.key){Lt(o),t.replaceChild(e,r,i,n);return}if((h=o.__release)&&h!==n.__release&&Lt(o),a[3]!==0&&(Dc(t,f,o[1],n[1]),p.distance===2))return;let g=a.length,_=o.length-1,b=Rc(a),y=wc(_+1);for(m=2,u=6;u<g;m++,u+=3)d=a[u],!!d&&(d===-1?kc(e,t,f,o,n,a,u,b,y,_):Cc(e,t,f,a,u,b,y,_));(h=n.__init)&&h!=o.__init&&h.apply(n,[f,...n.__args])},kc=(e,t,r,o,n,i,s,c,l,p)=>{let a=i[s+2];if(ar(a)){let f=a[1].key;if(f!==void 0&&c[f][2]!==void 0){let m=c[f];f=m[0],no(e,t,r,o[f],n[m[2]],l[f])}else{let m=i[s+1];Lt(a),t.removeChild(r,l[m]),Mc(l,p,m)}}else typeof a===fr&&t.setContent(r,"")},Cc=(e,t,r,o,n,i,s,c)=>{let l=o[n+2];if(typeof l===fr)t.setContent(r,l);else if(ar(l)){let p=l[1].key;if(p===void 0||i[p][0]===void 0){let a=o[n+1];t.createTree(e,r,l,s[a]),$c(s,c,a)}}},Mc=(e,t,r)=>{for(;t>r;t--)e[t]=Oc(e[t]-1,0)},$c=(e,t,r)=>{for(;t>=r;t--)e[t]++},Dc=(e,t,r,o)=>{let n=Vi(r,o,"full",I);e.removeAttribs(t,n.dels,r);let i=W,s,c,l;for(l=n.edits,s=l.length;(s-=2)>=0;)c=l[s],c[0]==="o"&&c[1]==="n"&&e.removeAttribs(t,[c],r),c!=="value"?e.setAttrib(t,c,l[s+1],o):i=l[s+1];for(l=n.adds,s=l.length;s-- >0;)c=l[s],c!=="value"?e.setAttrib(t,c,o[c],o):i=o[c];i!==W&&e.setAttrib(t,"value",i,o)},Lt=e=>{if(ar(e)){let t;if((t=e[1])&&t.__release===!1)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;t-- >2;)Lt(e[t])}},Rc=e=>{let t,r,o,n={};for(let i=e.length;(i-=3)>=0;)r=e[i+2],ar(r)&&(t=r[1].key)!==void 0&&(o=n[t],!o&&(n[t]=o=[,,]),o[e[i]+1]=e[i+1]);return n},Pt=(e,t)=>{let r;if(e===t)return!0;if(e!=null){if(typeof e.equiv===mr)return e.equiv(t)}else return e==t;if(t!=null){if(typeof t.equiv===mr)return t.equiv(e)}else return e==t;return typeof e===fr||typeof t===fr?!1:(r=Object.getPrototypeOf(e),(r==null||r===zi)&&(r=Object.getPrototypeOf(t),r==null||r===zi)?!(e.__diff===!1||t.__diff===!1)&&Or(e,t,Pt):typeof e!==mr&&e.length!==void 0&&typeof t!==mr&&t.length!==void 0?Nr(e,t,Pt):e instanceof Set&&t instanceof Set?Tr(e,t,Pt):e instanceof Map&&t instanceof Map?Ir(e,t,Pt):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!==e&&t!==t)};var qt=(e,t)=>{let r;(r=t.fill)&&r!=="none"&&e.fill(),(r=t.stroke)&&r!=="none"&&e.stroke(),(r=t.clip)&&e.clip(r===!0?"nonzero":r)};var io=(e,t,r,o,n=0,i=j,s=!1)=>{e.beginPath(),e.arc(r[0],r[1],o,n,i,s),qt(e,t)},Gi=(e,t,r,o,n=0,i=0,s=j,c=!1)=>{e.beginPath(),e.ellipse(r[0],r[1],o[0],o[1],n,i,s,c),qt(e,t)};var so=yi,Bi=(e,t)=>Q(t)?t[0]==="$"?e.grads[t.substr(1)]:t:so(t),Hi=(e,{from:t,to:r},o)=>{let n=e.createLinearGradient(t[0],t[1],r[0],r[1]);for(let i of o)n.addColorStop(i[0],so(i[1]));return n},Xi=(e,{from:t,to:r,r1:o,r2:n},i)=>{let s=e.createRadialGradient(t[0],t[1],o,r[0],r[1],n);for(let c of i)s.addColorStop(c[0],so(c[1]));return s};var Wi=(e,t,{width:r,height:o},n,i,s,c)=>{if(T(n,"toImageData")&&(n=n.toImageData()),n instanceof ImageData){e.putImageData(n,i[0],i[1]);return}r=r||n.width,o=o||n.height,s?e.drawImage(n,s[0],s[1],c?c[0]:r,c?c[1]:o,i[0],i[1],r,o):e.drawImage(n,i[0],i[1],r,o)};var Lc={align:"left",alpha:1,baseline:"alphabetic",compose:"source-over",dash:[],dashOffset:0,direction:"inherit",fill:"#000",filter:"none",font:"10px sans-serif",lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowBlur:0,shadowColor:"rgba(0,0,0,0)",shadowX:0,shadowY:0,smooth:!0,stroke:"#000",weight:1},Zi={align:"textAlign",alpha:"globalAlpha",baseline:"textBaseline",clip:"clip",compose:"globalCompositeOperation",dash:"setLineDash",dashOffset:"lineDashOffset",direction:"direction",fill:"fillStyle",filter:"filter",font:"font",lineCap:"lineCap",lineJoin:"lineJoin",miterLimit:"miterLimit",shadowBlur:"shadowBlur",shadowColor:"shadowColor",shadowX:"shadowOffsetX",shadowY:"shadowOffsetY",smooth:"imageSmoothingEnabled",stroke:"strokeStyle",weight:"lineWidth"},Yi=(e,t=!1)=>({attribs:{...e.attribs},grads:{...e.grads},edits:[],restore:t}),Ki=(e,t,r)=>{let o;if(!!r){Pc(e,r)&&(o=Yi(t,!0));for(let n in r){let i=Zi[n];if(i){let s=r[n];s!=null&&t.attribs[n]!==s&&(!o&&(o=Yi(t)),o.attribs[n]=s,o.edits.push(n),Qi(e,t,n,i,s))}}return o}},Ji=(e,t,r)=>{if(r.restore){e.restore();return}let o=r.edits,n=t.attribs;for(let i=o.length;i-- >0;){let s=o[i],c=n[s];Qi(e,t,s,Zi[s],c??Lc[s])}},co=(e,t,r)=>{!e.grads&&(e.grads={}),e.grads[t]=r},Qi=(e,t,r,o,n)=>{switch(r){case"fill":case"stroke":case"shadowColor":e[o]=Bi(t,n);break;case"dash":e[o].call(e,n);break;case"clip":break;default:e[o]=n}},Pc=(e,t)=>{let r;return(r=t.transform)||t.setTransform||t.translate||t.scale||t.rotate?(e.save(),r?e.transform(r[0],r[1],r[2],r[3],r[4],r[5]):(r=t.setTransform)?e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]):((r=t.translate)&&e.translate(r[0],r[1]),(r=t.rotate)&&e.rotate(r),(r=t.scale)&&(Oe(r)?e.scale(r[0],r[1]):e.scale(r,r))),!0):!1};var ur=(e,t,r,o)=>{t.stroke!=="none"&&(e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(o[0],o[1]),e.stroke())},ts=(e,t,r)=>{if(t.stroke!=="none"){e.beginPath();for(let{0:o,1:n}of r)e.moveTo(o[0],o[1]),e.lineTo(n[0],n[1]);e.stroke()}};var rs=(e,t,r,o)=>{let n;(n=t.fill)&&n!=="none"&&es(e,r,o,"fill","fillRect"),(n=t.stroke)&&n!=="none"&&es(e,r,o,"stroke","strokeRect")},es=(e,t,r,o,n)=>{let{start:i,cstride:s,estride:c,size:l}={start:0,cstride:1,estride:2,size:1,...t},p=t&&t.num!=null?t.num:(r.length-i)/c|0;if(t.shape==="circle")for(let a=i;p-- >0;a+=c)e.beginPath(),e.arc(r[a],r[a+s],l,0,j),e[o]();else{let a=l/2;for(let f=i;p-- >0;f+=c)e[n](r[f]-a,r[f+s]-a,l,l)}};var hr=(e,t,r)=>{e.beginPath();let o=[0,0];for(let n=0,i=r.length;n<i;n++){let s=r[n],c=s[1],l,p;switch(s[0]){case"m":c=[o[0]+c[0],o[1]+c[1]];case"M":e.moveTo(c[0],c[1]),o=c;break;case"l":c=[o[0]+c[0],o[1]+c[1]];case"L":e.lineTo(c[0],c[1]),o=c;break;case"h":c=[o[0]+c,o[1]],e.lineTo(c[0],c[1]),o=c;break;case"H":c=[c,o[1]],e.lineTo(c[0],c[1]),o=c;break;case"v":c=[o[0],o[1]+c],e.lineTo(c[0],c[1]),o=c;break;case"V":c=[o[0],c],e.lineTo(c[0],c[1]),o=c;break;case"c":l=s[2],p=s[3],p=[o[0]+p[0],o[1]+p[1]],e.bezierCurveTo(o[0]+c[0],o[1]+c[1],o[0]+l[0],o[1]+l[1],p[0],p[1]),o=p;break;case"C":l=s[2],p=s[3],e.bezierCurveTo(c[0],c[1],l[0],l[1],p[0],p[1]),o=p;break;case"q":l=s[2],l=[o[0]+l[0],o[1]+l[1]],e.quadraticCurveTo(o[0]+c[0],o[1]+c[1],l[0],l[1]),o=l;break;case"Q":l=s[2],e.quadraticCurveTo(c[0],c[1],l[0],l[1]),o=l;break;case"a":l=s[2],l=[o[0]+l[0],o[1]+l[1]],e.arcTo(o[0]+c[0],o[1]+c[1],l[0],l[1],s[3]),o=l;break;case"A":l=s[2],e.arcTo(c[0],c[1],l[0],l[1],s[3]),o=l;break;case"z":case"Z":e.closePath()}}qt(e,t)};var ns=(e,t,r,o)=>{let n;(n=t.fill)&&n!=="none"&&os(e,r,o,"fill","fillRect"),(n=t.stroke)&&n!=="none"&&os(e,r,o,"stroke","strokeRect")},os=(e,t,r,o,n)=>{let i=t&&t.size||1;if(t.shape==="circle")for(let s of r)e.beginPath(),e.arc(s[0],s[1],i,0,j),e[o]();else{let s=i/2;for(let c of r)e[n](c[0]-s,c[1]-s,i,i)}};var is=(e,t,r)=>{r.length<2||(lo(e,r),e.closePath(),qt(e,t))},lo=(e,t)=>{let r=t[0];e.beginPath(),e.moveTo(r[0],r[1]);for(let o=1,n=t.length;o<n;o++)r=t[o],e.lineTo(r[0],r[1])};var ss=(e,t,r)=>{r.length<2||t.stroke=="none"||(lo(e,r),e.stroke())};var cs=(e,t,r,o,n,i=0)=>{let s;if(i>0)return i=Math.min(Math.min(o,n)/2,i),o-=2*i,n-=2*i,hr(e,t,[["M",[r[0]+i,r[1]]],["h",o],["a",[i,0],[i,i],i],["v",n],["a",[0,i],[-i,i],i],["h",-o],["a",[-i,0],[-i,-i],i],["v",-n],["a",[0,-i],[i,-i],i]]);(s=t.fill)&&s!=="none"&&e.fillRect(r[0],r[1],o,n),(s=t.stroke)&&s!=="none"&&e.strokeRect(r[0],r[1],o,n)};var ls=(e,t,r,o,n)=>{let i;(i=t.fill)&&i!=="none"&&e.fillText(o.toString(),r[0],r[1],n),(i=t.stroke)&&i!=="none"&&e.strokeText(o.toString(),r[0],r[1],n)};var Ne=(e,t,r={attribs:{},edits:[]})=>{if(!t)return;if(T(t,"toHiccup")){Ne(e,t.toHiccup(),r);return}if(rt(t[0])){for(let i of t)Ne(e,i,r);return}let o=Ki(e,r,t[1]),n=o?o.attribs:r.attribs;if(!n.__skip){switch(t[0]){case"g":case"defs":qc(e,o,r,t);break;case"linearGradient":co(r,t[1].id,Hi(e,t[1],t[2]));break;case"radialGradient":co(r,t[1].id,Xi(e,t[1],t[2]));break;case"points":ns(e,n,t[1],t[2]);break;case"packedPoints":rs(e,n,t[1],t[2]);break;case"line":ur(e,n,t[2],t[3]);break;case"lines":ts(e,n,t[2]);break;case"hline":ur(e,n,[-1e6,t[2]],[1e6,t[2]]);break;case"vline":ur(e,n,[t[2],-1e6],[t[2],1e6]);break;case"polyline":ss(e,n,t[2]);break;case"polygon":is(e,n,t[2]);break;case"path":hr(e,n,t[2]);break;case"rect":cs(e,n,t[2],t[3],t[4],t[5]);break;case"circle":io(e,n,t[2],t[3]);break;case"ellipse":Gi(e,n,t[2],t[3],t[4],t[5],t[6]);break;case"arc":io(e,n,t[2],t[3],t[4],t[5]);break;case"text":ls(e,n,t[2],t[3],t[4]);break;case"img":Wi(e,n,t[1],t[2],t[3],t[4],t[5]);default:}o&&Ji(e,r,o)}},qc=(e,t,r,o)=>{let n=o.length,i=o[0]==="g"&&t||r;for(let s=2;s<n;s++)Ne(e,o[s],i)};var dr="function",Fc="string",as={render(e,t,...r){let o={...t};delete o.__diff,delete o.__normalize;let n=window.devicePixelRatio||1;return n!==1&&(!o.style&&(o.style={}),o.style.width=`${o.width}px`,o.style.height=`${o.height}px`,o.width*=n,o.height*=n),["canvas",o,["g",{__impl:ps,__diff:t.__diff!==!1,__normalize:t.__normalize!==!1,__release:t.__release===!0,__serialize:!1,__clear:t.__clear,scale:n!==1?n:null},...r]]}},po=(e,t,r)=>{let o=t.getContext("2d");ot(!!o,"canvas ctx unavailable");let n=r[1];if(n){if(n.__skip)return;n.__clear!==!1&&o.clearRect(0,0,t.width,t.height)}Ne(o,r)},Ft=(e,t)=>{if(t==null)return t;if(rt(t)){let r=t[0];if(typeof r===dr)return Ft(e,r.apply(null,[e.ctx,...t.slice(1)]));if(typeof r===Fc){let o=t[1];if(o&&o.__normalize===!1)return t;let n=[t[0],o];for(let i=2,s=t.length;i<s;i++){let c=Ft(e,t[i]);c!=null&&n.push(c)}return n}}else{if(typeof t===dr)return Ft(e,t(e.ctx));if(typeof t.toHiccup===dr)return Ft(e,t.toHiccup(e.ctx));if(typeof t.deref===dr)return Ft(e,t.deref());if(le(t)){let r=[];for(let o of t){let n=Ft(e,o);n!=null&&r.push(n)}return r}}return t},Vc=(e,t,r,o,n)=>{let i=o[1];if(i.__skip)return;if(i.__diff===!1)return Lt(r),po(e,t,o);let s=i.__impl;if(s&&s!==ps)return s.diffTree(e,t,r,o,n);if(pr(r,o,"only-distance",Pt).distance>0)return po(e,t,o)},ps={createTree:po,normalizeTree:Ft,diffTree:Vc,hydrateTree:$,getElementById:$,createElement:$,createTextElement:$,replaceChild:$,getChild:$,removeAttribs:$,removeChild:$,setAttrib:$,setContent:$};function ao(...e){let t=Ao(ao,e);if(t!==void 0)return t;let r=e[0]||0,o=e[1]||1;return Gt(()=>r,(n,i)=>n+o)}var ms=e=>e;function mo(e,t){return U(t)?me(mo(e),t):E(ce(e)?r=>[e(r),r]:r=>[e,r])}function fo(...e){let t=bt(fo,e);if(t)return t;let r=e[0],o=e[1]!==!1;return E(n=>{let i=o?{}:n;for(let s in n)i[s]=r(n[s]);return i})}function uo(...e){let t=bt(uo,e,xt);if(t)return t;let{key:r,mergeOnly:o,reset:n,all:i,backPressure:s}={key:ms,mergeOnly:!1,reset:!0,all:!0,backPressure:0,...e[1]},c=rt(e[0])?new Set(e[0]):e[0],l=new Set,p=new Map,a={},f=([m,u,d])=>{let h=!0;return o||s<1?[m,g=>((n&&i&&l.size>0||!n&&h)&&(g=d(g,a),a={},l.clear(),h=!1),u(g)),(g,_)=>{let b=r(_);return c.has(b)&&(a[b]=_,l.add(b),(o||fs(c,l))&&(g=d(g,a),h=!1,n?(a={},l.clear()):a={...a})),g}]:[m,g=>(i&&l.size>0&&(g=d(g,us(p,l)),p.clear(),l.clear()),u(g)),(g,_)=>{let b=r(_);if(c.has(b)){let y=p.get(b);for(!y&&p.set(b,y=[]),y.length>=s&&Kt(`max back pressure (${s}) exceeded for input: ${String(b)}`),y.push(_),l.add(b);fs(c,l)&&(g=d(g,us(p,l)),h=!1,!v(g)););}return g}]};return f.keys=()=>c,f.clear=()=>{p.clear(),c.clear(),l.clear(),a={}},f.add=m=>{c.add(m)},f.delete=(m,u=!0)=>{p.delete(m),c.delete(m),u&&(l.delete(m),delete a[m])},f}var fs=(e,t)=>{if(t.size<e.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0},us=(e,t)=>{let r={};for(let o of t){let n=e.get(o);r[o]=n.shift(),!n.length&&t.delete(o)}return r};var gr=rt,hs=le,ds=Q,gs=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),Te=(e,t,r,o,n,i=!0)=>{if(gr(o)){let s=o[0];if(typeof s=="function")return Te(e,t,r,s.apply(null,[e.ctx,...o.slice(1)]),n);let c=o[1];if(c.__impl)return c.__impl.createTree(e,r,o,n,i);let l=t.createElement(r,s,c,n);if(o.length>2){let p=o.length;for(let a=2;a<p;a++)Te(e,t,l,o[a],void 0,i)}return i&&gs(l,o),l}if(hs(o)){let s=[];for(let c of o)s.push(Te(e,t,r,c,n,i));return s}return o==null?r:t.createTextElement(r,o)},Ie=(e,t,r,o,n=0)=>{if(gr(o)){let i=t.getChild(r,n);typeof o[0]=="function"&&Ie(e,t,r,o[0].apply(null,[e.ctx,...o.slice(1)]),n);let s=o[1];if(s.__impl)return s.__impl.hydrateTree(e,r,o,n);gs(i,o);for(let c in s)c[0]==="o"&&c[1]==="n"&&t.setAttrib(i,c,s[c]);for(let c=o.length,l=2;l<c;l++)Ie(e,t,i,o[l],l-2)}else if(hs(o))for(let i of o)Ie(e,t,r,i,n),n++},bs=(e,t,r,o)=>{let n=ji[t]?document.createElementNS(_i,t):document.createElement(t);return r&&zc(n,r),xs(e,n,o)},ys=(e,t,r)=>xs(e,document.createTextNode(t),r),xs=(e,t,r)=>e?r===void 0?e.appendChild(t):e.insertBefore(t,e.children[r]):t,_s=(e,t)=>e.children[t],Ss=(e,t,r,o,n,i=!0)=>(t.removeChild(r,o),t.createTree(e,r,n,o,i));var As=(e,t)=>e.textContent=t,zc=(e,t)=>{for(let r in t)ho(e,r,t[r],t);return e},ho=(e,t,r,o)=>{if(t.startsWith("__"))return;let n=t[0]==="o"&&t[1]==="n";if(!n&&typeof r=="function"&&(r=r(o)),r!==void 0&&r!==!1)switch(t){case"style":Gc(e,r);break;case"value":Uc(e,r);break;case"prefix":e.setAttribute(t,ds(r)?r:Ti(r));break;case"accesskey":e.accessKey=r;break;case"contenteditable":e.contentEditable=r;break;case"tabindex":e.tabIndex=r;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=r;break;default:n?Bc(e,t.substr(2),r):e.setAttribute(t,r===!0?"":r)}else e[t]!=null?e[t]=null:e.removeAttribute(t);return e},Uc=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((r=e.value)!==void 0&&typeof t=="string"){let o=t.length-(r.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=o;break}default:e.value=t}},js=(e,t,r)=>{for(let o=t.length;o-- >0;){let n=t[o];n[0]==="o"&&n[1]==="n"?Hc(e,n.substr(2),r[n]):e.hasAttribute(n)?e.removeAttribute(n):e[n]=null}},Gc=(e,t)=>(e.setAttribute("style",vi(t)),e),Bc=(e,t,r)=>ds(r)?e.setAttribute("on"+t,r):gr(r)?e.addEventListener(t,...r):e.addEventListener(t,r),Hc=(e,t,r)=>gr(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r);var vs=(e,t)=>{let r=e.children[t];r!==void 0&&e.removeChild(r)};var xr=rt,Xc=le,Wc=H,Zc=(e,t)=>{let r=e[0],o=Wc(e[1]),n,i,s;return(typeof r!="string"||!(n=Si.exec(r)))&&Ye(`${r} is not a valid tag name`),i=n[1],r===i&&o&&(!t||e[1].key)?e:(s=Ni(o?{...e[1]}:{},n[2],n[3]),s.__skip&&e.length<3?[i,s]:[i,s,...e.slice(o?2:1)])},Es=(e,t)=>Et(t,e,e.ctx,[0],e.keys!==!1,e.span!==!1),Et=(e,t,r,o,n,i)=>{if(e!=null){if(xr(e)){if(e.length===0)return;let s,c=e[1],l;if(c&&(l=c.__impl)&&(l=l.normalizeTree))return l(t,e);let p=e[0];if(typeof p=="function")return Et(p.apply(null,[r,...e.slice(1)]),t,r,o,n,i);if(typeof p.render=="function"){let a=[r,...e.slice(1)];return s=Et(p.render.apply(p,a),t,r,o,n,i),xr(s)&&(s.__this=p,s.__init=p.init,s.__release=p.release,s.__args=a),s}return s=Zc(e,n),c=s[1],c.__normalize===!1?s:(n&&c.key===void 0&&(c.key=o.join("-")),s.length>2?Yc(s,c,t,r,o,n,i):s)}return typeof e=="function"?Et(e(r),t,r,o,n,i):typeof e.toHiccup=="function"?Et(e.toHiccup(t.ctx),t,r,o,n,i):typeof e.deref=="function"?Et(e.deref(),t,r,o,n,i):i?["span",n?{key:o.join("-")}:{},e.toString()]:e.toString()}},Yc=(e,t,r,o,n,i,s)=>{let c=e[0],l=[c,t];s=s&&!Ai[c];for(let p=2,a=2,f=0,m=e.length;p<m;p++){let u=e[p];if(u!=null){let d=xr(u);if(d&&xr(u[0])||!d&&Xc(u))for(let h of u)h=Et(h,r,o,n.concat(f),i,s),h!==void 0&&(l[a++]=h),f++;else u=Et(u,r,o,n.concat(f),i,s),u!==void 0&&(l[a++]=u),f++}}return l};var Ns={createTree(e,t,r,o,n){return Te(e,this,t,r,o,n)},hydrateTree(e,t,r,o){return Ie(e,this,t,r,o)},diffTree(e,t,r,o,n){no(e,this,t,r,o,n)},normalizeTree:Es,getElementById(e){return document.getElementById(e)},getChild:_s,createElement:bs,createTextElement:ys,replaceChild(e,t,r,o,n){Ss(e,this,t,r,o,n)},removeChild:vs,setContent:As,removeAttribs:js,setAttrib:ho};var Ts=(e,t)=>Q(e)?t.getElementById(e):e;var Is=(e,t)=>{if(e==null||!t||!t.length)return e;let r={...e};for(let o of t){let n=r[o];T(n,"deref")&&(r[o]=n.deref())}return r};var Os=(e={},t=Ns)=>{let r={root:"app",...e},o=Ts(r.root,t);return ve([()=>[],n=>n,(n,i)=>(r.ctx=Is(e.ctx,r.autoDerefKeys),i=t.normalizeTree(r,i),i!=null?(r.hydrate?(t.hydrateTree(r,o,i),r.hydrate=!1):t.diffTree(r,o,n,i,0),i):n)])};var ws=(e,t,r,o,n,i)=>["div.pv2",["div",i],["input.w-100",{type:"range",value:e,min:r,max:o,step:n,oninput:s=>{let c=s.target,l=c&&c.value;t(parseFloat(l))}}]];var N;(function(e){e[e.IDLE=0]="IDLE",e[e.ACTIVE=1]="ACTIVE",e[e.DONE=2]="DONE",e[e.UNSUBSCRIBED=3]="UNSUBSCRIBED",e[e.ERROR=4]="ERROR"})(N||(N={}));var F;(function(e){e[e.NEVER=0]="NEVER",e[e.FIRST=1]="FIRST",e[e.LAST=2]="LAST"})(F||(F={}));var Qc=0,Kc=()=>Qc++,M=(e,t)=>!t||!t.id?{...t,id:e+"-"+Kc()}:t;var V=te;var K=class{constructor(t,r){this.wrapped=t,this.last=W,this.state=N.IDLE,this.subs=[],r=M("sub",{closeIn:F.LAST,closeOut:F.LAST,cache:!0,...r}),this.parent=r.parent,this.id=r.id,this.closeIn=r.closeIn,this.closeOut=r.closeOut,this.cacheLast=r.cache,r.xform&&(this.xform=r.xform(ke()))}deref(){return this.last!==W?this.last:void 0}getState(){return this.state}setState(t){this.state=t}subscribe(t,r={}){this.ensureState();let o;return t instanceof K&&!r.xform?(t.ensureState(),ot(!t.parent,`sub '${t.id}' already has a parent`),t.parent=this,o=t):o=new K(t,{...r,parent:this}),this.subs.push(o),this.setState(N.ACTIVE),o.setState(N.ACTIVE),this.last!=W&&o.next(this.last),o}transform(...t){let r,o;return H(Ve(t))&&(o=t.pop(),r={error:o.error}),this.subscribe(r,M("xform",t.length>0?{...o,xform:st(...t)}:o))}map(t,r){return this.transform(E(t),r||{})}unsubscribe(t){return t?this.unsubscribeChild(t):this.unsubscribeSelf()}unsubscribeSelf(){return V.debug(this.id,"unsub self"),this.parent&&this.parent.unsubscribe(this),this.state<N.UNSUBSCRIBED&&(this.state=N.UNSUBSCRIBED),this.release(),!0}unsubscribeChild(t){V.debug(this.id,"unsub child",t.id);let r=this.subs.indexOf(t);return r>=0?(this.subs.splice(r,1),(this.closeOut===F.FIRST||!this.subs.length&&this.closeOut!==F.NEVER)&&this.unsubscribe(),!0):!1}next(t){this.state>=N.DONE||(this.xform?this.dispatchXform(t):this.dispatch(t))}done(){V.debug(this.id,"entering done()"),!(this.state>=N.DONE)&&(this.xform&&!this.dispatchXformDone()||(this.state=N.DONE,this.dispatchTo("done")&&this.state<N.UNSUBSCRIBED&&this.unsubscribe(),V.debug(this.id,"exiting done()")))}error(t){let r=this.wrapped,o=r&&r.error;return o&&V.debug(this.id,"attempting wrapped error handler"),o&&r.error(t)||this.unhandledError(t)}unhandledError(t){return(V!==te?V:console).warn(this.id,"unhandled error:",t),this.unsubscribe(),this.state=N.ERROR,!1}dispatchTo(t,r){let o=this.wrapped;if(o)try{o[t]&&o[t](r)}catch(i){if(!this.error(i))return!1}let n=t==="next"?this.subs:[...this.subs];for(let i=n.length;i-- >0;){o=n[i];try{o[t]&&o[t](r)}catch(s){if(t==="error"||!o.error||!o.error(s))return this.unhandledError(s)}}return!0}dispatch(t){V.debug(this.id,"dispatch",t),this.cacheLast&&(this.last=t),this.dispatchTo("next",t)}dispatchXform(t){let r;try{r=this.xform[2]([],t)}catch(o){this.error(o);return}this.dispatchXformVals(r)&&v(r)&&this.done()}dispatchXformDone(){let t;try{t=this.xform[1]([])}catch(r){return this.error(r)}return this.dispatchXformVals(t)}dispatchXformVals(t){let r=G(t);for(let o=0,n=r.length;o<n&&this.state<N.DONE;o++)this.dispatch(r[o]);return this.state<N.ERROR}ensureState(){this.state>=N.DONE&&Kt(`operation not allowed in state ${this.state}`)}release(){this.subs.length=0,delete this.parent,delete this.xform,delete this.last}};var go=class extends K{constructor(t){super(void 0,t)}unsubscribe(t){let r=super.unsubscribe(t);return(!t||!this.subs.length)&&this.sideSub.unsubscribe(),r}done(){this.sideSub.unsubscribe(),super.done()}};function ae(e,t){return new xo(e,t)}var bo=(e,t)=>{let r=new xo(t);return r.next(e),r},xo=class extends K{constructor(t,r){let[o,n]=ce(t)?[t,r||{}]:[void 0,t||{}];super(n.error?{error:n.error}:void 0,M("stream",n));this.src=o,this._inited=!1}subscribe(t,r={}){let o=super.subscribe(t,r);if(!this._inited){if(this.src)try{this._cancel=this.src(this)||(()=>{})}catch(n){let i=this.wrapped;(!i||!i.error||!i.error(n))&&this.unhandledError(n)}this._inited=!0}return o}unsubscribe(t){let r=super.unsubscribe(t);return r&&(!t||(!this.subs||!this.subs.length)&&this.closeOut!==F.NEVER)&&this.cancel(),r}done(){this.cancel(),super.done(),delete this.src,delete this._cancel}error(t){return super.error(t)?!0:(this.cancel(),!1)}cancel(){if(this._cancel){V.debug(this.id,"cancel");let t=this._cancel;delete this._cancel,t()}}};var ks=()=>typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node!="undefined";var Cs=(e,t)=>e===F.FIRST||e===F.LAST&&!t;var Jc=(e,t,r=!1,o)=>ae(n=>{let i=s=>n.next(s);return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},M(`event-${t}`,o)),Ds=(e,t,r=!1,o)=>Jc(e,t,r,o);var Rs=(e,t)=>{let r=!0;for(let o of t)r=e.removeID(o)&&r;return r};var $s=e=>new Ms(e),Ms=class extends K{constructor(t){let r=uo(new Set,{key:n=>n[0],mergeOnly:t.mergeOnly===!0,reset:t.reset===!0,all:t.all!==!1,backPressure:t.backPressure||0}),o=fo(n=>n[1]);super(void 0,M("streamsync",{...t,xform:t.xform?st(r,o,t.xform):st(r,o)}));this.sources=new Map,this.realSourceIDs=new Map,this.invRealSourceIDs=new Map,this.idSources=new Map,this.psync=r,this.clean=!!t.clean,t.src&&this.addAll(t.src)}add(t,r){r||(r=t.id),this.ensureState(),this.psync.add(r),this.realSourceIDs.set(r,t.id),this.invRealSourceIDs.set(t.id,r),this.idSources.set(t.id,t),this.sources.set(t,t.subscribe({next:o=>o[1]instanceof K?this.add(o[1]):this.next(o),done:()=>this.markDone(t),__owner:this},{xform:mo(r),id:`in-${r}`}))}addAll(t){for(let r in t)this.psync.add(r);for(let r in t)this.add(t[r],r)}remove(t){let r=this.sources.get(t);if(r){let o=this.invRealSourceIDs.get(t.id);return V.info(`removing src: ${t.id} (${o})`),this.psync.delete(o,this.clean),this.realSourceIDs.delete(o),this.invRealSourceIDs.delete(t.id),this.idSources.delete(t.id),this.sources.delete(t),r.unsubscribe(),!0}return!1}removeID(t){let r=this.getSourceForID(t);return r?this.remove(r):!1}removeAll(t){for(let o of t)this.psync.delete(this.invRealSourceIDs.get(o.id));let r=!0;for(let o of t)r=this.remove(o)&&r;return r}removeAllIDs(t){return Rs(this,t)}getSourceForID(t){return this.idSources.get(this.realSourceIDs.get(t))}getSources(){let t={};for(let[r,o]of this.idSources)t[this.invRealSourceIDs.get(r)]=o;return t}unsubscribe(t){if(!t){V.debug(this.id,"unsub sources");for(let r of this.sources.values())r.unsubscribe();this.sources.clear(),this.psync.clear(),this.realSourceIDs.clear(),this.invRealSourceIDs.clear(),this.idSources.clear()}return super.unsubscribe(t)}markDone(t){this.remove(t),Cs(this.closeIn,this.sources.size)&&this.done()}};var Ls=(e,t)=>(t=M("interval",{num:Infinity,...t}),ae(r=>{let o=0,n=t.num;r.next(o++);let i=setInterval(()=>{r.next(o++),--n<=0&&(clearInterval(i),r.closeIn!==F.NEVER&&r.done())},e);return()=>clearInterval(i)},t));var Ps=e=>ks()?Ls(16,e):ae(t=>{let r=0,o=!0,n=()=>{o&&t.next(r++),o&&(i=requestAnimationFrame(n))},i=requestAnimationFrame(n);return()=>{o=!1,cancelAnimationFrame(i)}},M("raf",e));var Fs=(e,t)=>new qs(e,t),qs=class extends go{constructor(t,r){r=M("sidetoggle",r),super(r),this.isActive=!!r.initial;let o=r.pred||(()=>!0),n=this;this.sideSub=t.subscribe({next(i){o(i)&&(n.isActive=!n.isActive)},done(){n.done()}})}next(t){this.isActive&&this.state<N.DONE&&super.next(t)}};var Vs=Ds(document,"keyup").transform(St(e=>[e.key,null]));Vs.next({});var yo=bo(1),zs=bo(!0),tl=Ps().subscribe(Fs(zs)).transform(ve(ao())),Us=$s({src:{scaleValue:yo,animationValue:zs,frameValue:tl,keyValue:Vs}});var Gs=window.innerWidth*.7,br=Gs,_o=Gs,yr=br/2*.8,el=[br/2,_o/2];var rl=[[yr/1,5,!1],[yr/2,11,!0],[yr/4,17,!1],[yr/8,5,!0]],ol=(e,t,r,o)=>[...E(n=>He(null,[t,n*j+o],e),Gn(r,!1))];Us.transform(E(nl),Os());var il=Un(E(e=>300+100*Math.sin(e*.001),ki(1e3)));function sl(e){let t=e.frameValue/il.next().value,r=[...St(([c,l,p])=>ol(el,c,l,p?t:B-t),rl)],o=Xn([br,_o],{fill:"111111"}),n=new oo;n.addKeys(r,.01);let i=n.voronoi(Mt(o));return[o,hn({fill:"white","stroke-width":1},i.map(c=>Vn(ne(Bn(wi(c,.5,!0)),{scale:e.scaleValue})))),zn(r,{size:2,shape:"circle",fill:"111111"})]}function nl(e){return["div.ma3.flex.flex-row.flex-column-l.flex-column-m.sans-serif",[["div.pr3.flex.justify-center",["div.mv3",ws(e.scaleValue,t=>yo.next(t),0,1.2,.01,"Tangent scale factor")]],["div.flex.justify-center",[as,{width:br,height:_o},...sl(e)]]]]}})();
