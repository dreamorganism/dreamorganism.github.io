(()=>{var ct=(t,e=o=>o!==void 0?": "+o:"")=>class extends Error{constructor(o){super(t(o)+e(o))}};var Yr=ct(()=>"illegal argument(s)"),Dt=t=>{throw new Yr(t)};var Qr=ct(()=>"illegal arity"),lt=t=>{throw new Qr(t)};var Jr=ct(()=>"unsupported operation"),ft=t=>{throw new Jr(t)};function Ee(...t){let[e,o,n,r,i,s,c,l,f,p]=t;switch(t.length){case 0:lt(0);case 1:return e;case 2:return(...a)=>e(o(...a));case 3:return(...a)=>e(o(n(...a)));case 4:return(...a)=>e(o(n(r(...a))));case 5:return(...a)=>e(o(n(r(i(...a)))));case 6:return(...a)=>e(o(n(r(i(s(...a))))));case 7:return(...a)=>e(o(n(r(i(s(c(...a)))))));case 8:return(...a)=>e(o(n(r(i(s(c(l(...a))))))));case 9:return(...a)=>e(o(n(r(i(s(c(l(f(...a)))))))));case 10:default:let m=(...a)=>e(o(n(r(i(s(c(l(f(p(...a))))))))));return t.length===10?m:Ee(m,...t.slice(10))}}function uo(t,...e){let[o,n,r,i,s,c,l,f]=e;switch(e.length){case 1:return(...p)=>t(o,...p);case 2:return(...p)=>t(o,n,...p);case 3:return(...p)=>t(o,n,r,...p);case 4:return(...p)=>t(o,n,r,i,...p);case 5:return(...p)=>t(o,n,r,i,s,...p);case 6:return(...p)=>t(o,n,r,i,s,c,...p);case 7:return(...p)=>t(o,n,r,i,s,c,l,...p);case 8:return(...p)=>t(o,n,r,i,s,c,l,f,...p);default:Dt()}}var ho=t=>typeof t=="function";var _=(t,e)=>t!=null&&typeof t[e]=="function";var z=Array.isArray;var Lt=t=>t!=null&&typeof t!="function"&&t.length!==void 0;var k=t=>typeof t=="string";var Q=t=>t!=null&&typeof t[Symbol.iterator]=="function";var pt=t=>t!=null&&typeof t!="string"&&typeof t[Symbol.iterator]=="function";var R=t=>typeof t=="number";var xo=Object.getPrototypeOf,C=t=>{let e;return t!=null&&typeof t=="object"&&((e=xo(t))===null||xo(e)===null)};var q=-Infinity,G=Infinity,ks=Object.freeze([q,q]),Rs=Object.freeze([G,G]),Is=Object.freeze([1,1]),Pt=Object.freeze([0,0]),Cs=Object.freeze([1,0]),vs=Object.freeze([0,1]),Ds=Object.freeze([q,q,q]),Ls=Object.freeze([G,G,G]),Ps=Object.freeze([1,1,1]),go=Object.freeze([0,0,0]),Fs=Object.freeze([1,0,0]),zs=Object.freeze([0,1,0]),qs=Object.freeze([0,0,1]),Gs=Object.freeze([q,q,q,q]),Us=Object.freeze([G,G,G,G]),js=Object.freeze([1,1,1,1]),Vs=Object.freeze([0,0,0,0]),Bs=Object.freeze([1,0,0,0]),Hs=Object.freeze([0,1,0,0]),Xs=Object.freeze([0,0,1,0]),Zs=Object.freeze([0,0,0,1]);var Kr=t=>t!=null&&typeof t.deref=="function",at=t=>Kr(t)?t.deref():t;var Ft;(function(t){t[t.FINE=0]="FINE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.SEVERE=4]="SEVERE",t[t.NONE=5]="NONE"})(Ft||(Ft={}));var J=Symbol(),y=()=>{};var zt=(()=>{try{return process.env.UMBRELLA_ASSERTS==="1"}catch(t){}return!1})()?(t,e="assertion failed")=>{if(typeof t=="function"&&!t()||!t)throw new Error(typeof e=="function"?e():e)}:y;var _o=Object.freeze({level:Ft.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});var K=t=>_(t,"xform")?t.xform():t;var mt=class{constructor(e){this.value=e}deref(){return this.value}},bo=t=>new mt(t),U=t=>t instanceof mt,yo=t=>t instanceof mt?t:new mt(t),ut=t=>t instanceof mt?t.deref():t;var ti=t=>t.length===2?[void 0,t[1]]:t.length===3?[t[1],t[2]]:lt(t.length);function Ao(...t){let e=t[0],o=e[0],n=e[1],r=e[2];t=ti(t);let i=t[0]==null?o():t[0],s=t[1];return ut(n(_(s,"$reduce")?s.$reduce(r,i):Lt(s)?ei(r,i,s):oi(r,i,s)))}var ei=(t,e,o)=>{for(let n=0,r=o.length;n<r;n++)if(e=t(e,o[n]),U(e)){e=e.deref();break}return e},oi=(t,e,o)=>{for(let n of o)if(e=t(e,n),U(e)){e=e.deref();break}return e},qt=(t,e)=>[t,o=>o,e];function So(t){return t?[...t]:qt(()=>[],(e,o)=>(e.push(o),e))}function*Eo(t,e){let o=K(t)(So()),n=o[1],r=o[2];for(let i of e){let s=r([],i);if(U(s)){yield*ut(n(s.deref()));return}s.length&&(yield*s)}yield*ut(n([]))}function*Oe(t,e){let o=K(t)([y,y,(n,r)=>r])[2];for(let n of e){let r=o(J,n);if(U(r)){r=ut(r.deref()),r!==J&&(yield r);return}r!==J&&(yield r)}}var Oo=(t,e,o=Oe)=>{let n=e.length-1;return Q(e[n])?e.length>1?o(t.apply(null,e.slice(0,n)),e[n]):o(t(),e[0]):void 0};var dt=(t,e)=>[t[0],t[1],e];function v(t,e){return Q(e)?Oe(v(t),e):o=>{let n=o[2];return dt(o,(r,i)=>n(r,t(i)))}}function Te(...t){return ni(Te,Ao,t)}var ni=(t,e,o)=>{let n,r;switch(o.length){case 4:r=o[3],n=o[2];break;case 3:r=o[2];break;case 2:return v(i=>t(o[0],o[1],i));default:lt(o.length)}return e(K(o[0])(o[1]),n,r)};function To(t,e){t=t||"";let o=!0;return e?[...e].join(t):qt(()=>"",(n,r)=>(n=o?n+r:n+t+r,o=!1,n))}function ht(t,e,o){return new No(t,e,o)}var No=class{constructor(e,o,n){e===void 0?(e=0,o=Infinity):o===void 0&&(o=e,e=0),n=n===void 0?e<o?1:-1:n,this.from=e,this.to=o,this.step=n}*[Symbol.iterator](){let{from:e,to:o,step:n}=this;if(n>0)for(;e<o;)yield e,e+=n;else if(n<0)for(;e>o;)yield e,e+=n}$reduce(e,o){let n=this.step;if(n>0)for(let r=this.from,i=this.to;r<i&&!U(o);r+=n)o=e(o,r);else for(let r=this.from,i=this.to;r>i&&!U(o);r+=n)o=e(o,r);return o}};function*Mo(...t){let e=t.map(o=>o[Symbol.iterator]());for(;;){let o=[];for(let n of e){let r=n.next();if(r.done)return;o.push(r.value)}yield o}}var H=Math.PI,x=H*2,ri=H/2,vc=H/3,Dc=H/4,Lc=H/6,Pc=1/H,ii=1/x,Fc=1/ri,zc=H/180,qc=180/H,Gc=(1+Math.sqrt(5))/2,si=Math.SQRT2,ci=Math.sqrt(3),Uc=si/2,jc=ci/2,Vc=1/3,Bc=2/3,Hc=1/6,X=1e-6;var D=(t,e=1)=>[Math.cos(t)*e,Math.sin(t)*e];var li=Math.abs;var Ne=(t,e,o=X)=>li(t-e)<=o;var g=t=>t<0?0:t>1?1:t;var $o=t=>t<0?t+1:t>1?t-1:t;var At=(t,e,o)=>e+(o-e)*g(t);var Gt=t=>t-Math.floor(t);var wo=Object.getPrototypeOf({}),Ut="function",ko="string",L=(t,e)=>{let o;if(t===e)return!0;if(t!=null){if(typeof t.equiv===Ut)return t.equiv(e)}else return t==e;if(e!=null){if(typeof e.equiv===Ut)return e.equiv(t)}else return t==e;return typeof t===ko||typeof e===ko?!1:(o=Object.getPrototypeOf(t),(o==null||o===wo)&&(o=Object.getPrototypeOf(e),o==null||o===wo)?ke(t,e):typeof t!==Ut&&t.length!==void 0&&typeof e!==Ut&&e.length!==void 0?Me(t,e):t instanceof Set&&e instanceof Set?$e(t,e):t instanceof Map&&e instanceof Map?we(t,e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():t!==t&&e!==e)},Me=(t,e,o=L)=>{let n=t.length;if(n===e.length)for(;--n>=0&&o(t[n],e[n]););return n<0},$e=(t,e,o=L)=>t.size===e.size&&o([...t.keys()].sort(),[...e.keys()].sort()),we=(t,e,o=L)=>t.size===e.size&&o([...t].sort(),[...e].sort()),ke=(t,e,o=L)=>{if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!e.hasOwnProperty(n)||!o(t[n],e[n]))return!1;return!0};var Ro=t=>t[t.length-1];var Io=1/4294967295,Re=class{float(e=1){return this.int()*Io*e}norm(e=1){return(this.int()*Io-.5)*2*e}minmax(e,o){return this.float()*(o-e)+e}};var Ie=Math.random,Co=class extends Re{int(){return Ie()*4294967296>>>0}float(e=1){return Ie()*e}norm(e=1){return(Ie()-.5)*2*e}},Ce=new Co;var vo="0123456789abcdef";var jt=t=>vo[t>>>4&15]+vo[t&15];var Do=t=>jt(t>>>8)+jt(t&255);var Lo=t=>jt(t>>>16)+Do(t);function ve(...t){return Oo(ve,t)||(e=>{let o=e[2],n=t[0],r=t[1]||0;return dt(e,(i,s)=>o(i,n(r++,s)))})}function Po(...t){return t=t.map(K),Ee.apply(null,t)}function De(t,e){return Q(e)?Eo(De(t),e):o=>{let n=o[2],r=t;return dt(o,(i,s)=>--r>0?n(i,s):r===0?yo(n(i,s)):bo(i))}}var Fo=t=>([e,o,n])=>`${e}=${o}${t}${n};`,zo=t=>([e,o])=>`${e}=${o}${t}n;`,qo=(t,e)=>([o,n,r,i])=>`${o}=(${n}${t}${r})${e}${i};`;var Go=(t,e)=>([o,n,r])=>`${o}=(${n}${t}n)${e}${r};`;var Vt=([t,e])=>`${t}*${e}`,Uo=([t,e])=>`s+=${t}*${e};`,jo=([t,e])=>`${t}=${e};`,Vo=([t])=>`${t}=n;`;var Bo=([t,e,o])=>`${t}=${e}+(${o}-${e})*n;`;var M=(t=0)=>{let e=new Array(5),o,n=(...r)=>{let i=e[r[t].length]||o;return i?i(...r):ft(`no impl for vec size ${r[t].length}`)};return n.add=(r,i)=>e[r]=i,n.default=r=>o=r,n.impl=r=>e[r]||o,n};var Le="o,a,b",Ho="o,a,b,c",fi="o,a,n",Xo="o,a,n,b",Zo="o,a,b,n",Wo="io=0,ia=0,so=1,sa=1";var Yo="!o&&(o=[]);",pi=t=>e=>e>1?`${t}[i${t}+${e}*s${t}]`:e==1?`${t}[i${t}+s${t}]`:`${t}[i${t}]`,ai=t=>v(pi(t),ht()),mi=t=>v(e=>`${t}[${e}]`,ht()),Qo=(t,e,o,n="a",r="",i="",s="",c=!1)=>[i,Te(Po(De(t),ve((l,f)=>e(f,l))),To(r),Mo.apply(null,o.split(",").map(c?ai:mi))),s,n!==""?`return ${n};`:""],ui=(t,e,o="a",n,r,i=!1)=>[n,"for(let i=a.length;--i>=0;) {",t(e.split(",").map(i?s=>`${s}[i${s}+i*s${s}]`:s=>`${s}[i]`)),"}",r,o!==null?`return ${o};`:""],di=(t,e)=>`!${t} && (${t}=${e.split(",")[1]});`,j=(t,e,o,n=o,r="a",i,s,c,l=!1)=>new Function(o,Qo(t,e,n,r,i,s,c,l).join("")),Jo=(t,e,o,n,r,i=r,s="a",c="",l,f,p=!1)=>new Function(n,`return (${r})=>{${Qo(t,o,i,s,c,l,f,p).join("")}}`)(...e),tt=(t,e,o=e,n="a",r,i,s=!1)=>new Function(e,ui(t,o,n,r,i,s).join(""));var $=(t,e=Le,o,n="o",r=1,i)=>{o=o||e,i=i??di(n,e);let s=M(r),c=l=>s.add(l,j(l,t,e,o,n,"",i));return s.default(tt(t,e,o,n,i)),[s,c(2),c(3),c(4)]};var xt=t=>$(Fo(t)),Ko=t=>$(zo(t),fi);var Pe=t=>St.add(t,Jo(t,[Ne,X],([e,o])=>`eq(${e},${o},eps)`,"eq,_eps","a,b,eps=_eps","a,b","","&&","return a.length === b.length && ",";")),St=M();St.default((t,e,o=X)=>_(t,"eqDelta")?t.eqDelta(e,o):_(e,"eqDelta")?e.eqDelta(t,o):hi(t,e,t.length,o));var Dl=Pe(2),Ll=Pe(3),Pl=Pe(4),hi=(t,e,o,n=X,r=0,i=0,s=1,c=1)=>{for(;o>0;o--,r+=s,i+=c)if(!Ne(t[r],e[i],n))return!1;return!0};var tn=t=>(t&255)<<16|t>>16&255|t&4278255360;var[et,Bt,en,Ul]=$(Go("*","+"),Xo,Le);var[Et,Bl,Hl,Xl]=Ko("*");var on=(t,e,o,n,r,i,s)=>(!t&&(t=e),et(t,n,s,et(t,o,i,Et(t,e,r)))),nn=(t,e,o,n,r,i,s,c,l)=>(!t&&(t=e),et(t,r,l,et(t,n,c,et(t,o,s,Et(t,e,i)))));var[Kl,Ht,rn,tf]=xt("+");var sn=(t,e,o,n)=>(!t&&(t=[]),t[0]=e,t[1]=o,t[2]=n,t),w=(t,e,o,n,r)=>(!t&&(t=[]),t[0]=e,t[1]=o,t[2]=n,t[3]=r,t);var Fe=t=>Xt.add(t,j(t,Vt,"a,b",void 0,"","+","return ",";")),Xt=M();Xt.default(tt(Uo,"a,b",void 0,"s","let s=0;"));var cf=Fe(2),lf=Fe(3),ff=Fe(4);var ze=t=>gt.add(t,j(t,([e])=>`${e}*${e}`,"a","a","","+","return ",";")),gt=M();gt.default(tt(([t])=>`sum+=${t}*${t};`,"a",void 0,"sum","let sum=0;"));var uf=ze(2),df=ze(3),hf=ze(4);var cn=t=>Math.sqrt(gt(t));var[S,ln,Af,Sf]=$(jo,"o,a",void 0,"o",1,Yo);var fn=(t,e,o=1)=>{!t&&(t=e);let n=cn(e);return n>=X?Et(t,e,o/n):t!==e?S(t,e):t};var[Ot,pn,kf,Rf]=xt("-");var[Tt,an,Df,Lf]=$(Bo,Zo);var mn=Math.cos,un=Math.sin,dn=M(1),Zt=dn.add(2,(t,e,o=Pt)=>Bt(t||e,D(e[1]),e[0],o)),jf=dn.add(3,(t,e,o=go)=>{let n=e[0],r=e[1],i=e[2],s=mn(r);return sn(t||e,n*s*mn(i)+o[0],n*s*un(i)+o[1],n*un(r)+o[2])});var xi=t=>_(t,"copy")?t.copy():S([],t),Wt=t=>t.map(xi);var hn=([t,e])=>`t=${t}-${e};s+=t*t;`,xn="let t,s=0;",qe=t=>Z.add(t,j(t,hn,"a,b",void 0,"s","",xn)),Z=M();Z.default(tt(hn,"a,b",void 0,"s",xn));var gi=qe(2),_i=qe(3),bi=qe(4);var Ge=(t,e)=>Math.sqrt(Z(t,e));var[tp,gn,ep,op]=xt("*");var Ue=t=>j(t,Vt,`o,a,${Wo}`,"o,a","","+","return ",";",!0),sp=Ue(2),Yt=Ue(3),yi=Ue(4);var[pp,ap,mp,up]=$(Vo,"a,n","a","a",0,"");var _n=t=>new Array(t).fill(0);var bn=t=>_(t,"empty")?t.empty():_n(t.length);function V(t,e){return!e&&(e={}),(...o)=>{let n=JSON.stringify(o);return n!==void 0?n in e?e[n]:e[n]=t.apply(null,o):t.apply(null,o)}}var[Ap,Qt,Sp,Ep]=$(qo("*","+"),Ho);var Jt=(t,e,o,n,r,i)=>{let s=1-i,c=s*s,l=i*i;return nn(t,e,o,n,r,c*s,3*c*i,3*l*s,l*i)};var Kt=(t,e,o,n,r)=>{let i=1-r;return on(t,e,o,n,i*i,2*i*r,r*r)};var yn=(t,e,o,n)=>Bt(t,o,n,e),An=(t,e,o,n)=>en(t,o,n,e);var je=(t,e)=>(o,n,r)=>{o?o!==n&&S(o,n):o=n;let i=Math.sin(r),s=Math.cos(r),c=n[t],l=n[e];return o[t]=c*s-l*i,o[e]=c*i+l*s,o},Ip=je(1,2),Cp=je(2,0),Sn=je(0,1);var En=t=>Object.assign({},t.attribs);var Nt=class{constructor(e=[],o){this.points=e,this.attribs=o}*[Symbol.iterator](){yield*this.points}};var On=(t,e,o,n,r=[])=>Ht(null,Sn(null,gn(r,D(n),e),o),t);var E=20;var Ve=(t,e,o)=>{let n=Ot([],o,e),r=gt(n);return r>1e-6?Xt(Ot([],t,e),n)/r:void 0};var Be=(t,e,o,n,r=!1,i=0)=>{let s=Ve(t,e,o);if(s!==void 0&&(!r||s>=i&&s<=1-i))return n=n||bn(t),s<=0?S(n,e):s>=1?S(n,o):Tt(n,e,o,s)};var Tn=(t,e,o=!1,n=[])=>{if(!e.length)return;let r=[],i=e.length-1,s=Infinity,c,l;for(o?(c=i,l=0):(c=0,l=1);l<=i;c=l,l++)if(Be(t,e[c],e[l],r)){let f=Z(t,r);f<s&&(s=f,S(n,r))}return s<Infinity?n:void 0};var I=class{constructor(e,o=!1){o?(this.points=e.slice(),this.points.push(e[0])):this.points=e,this.buildIndex()}totalLength(){let e=this.index;return e?e[e.length-1]:0}pointAt(e){let o=this.points,n=o.length-1;if(n<0)return;if(n===0||e<=0)return o[0];if(e>=1)return o[n];let r=this.index,i=e*r[n];for(let s=1;s<=n;s++)if(r[s]>=i)return Tt([],o[s-1],o[s],(i-r[s-1])/(r[s]-r[s-1]))}closestPoint(e){return Tn(e,this.points)}closestT(e){let{index:o,points:n}=this,r=[],i=[],s=Infinity,c=-1;for(let l=0,f=o.length-1;l<f;l++)if(Be(e,n[l],n[l+1],r)){let p=Z(e,r);p<s&&(s=p,c=l,S(i,r))}return c>=0?At(Ve(e,n[c],n[c+1])||0,o[c],o[c+1])/this.totalLength():void 0}segmentAt(e){let o=this.indexAt(e);if(o!==void 0)return o=Math.max(1,o),[this.points[o-1],this.points[o]]}tangentAt(e,o=1){let n=this.segmentAt(e);return n?fn(null,Ot([],n[1],n[0]),o):void 0}splitAt(e){if(e<=0||e>=1)return[this.points];let o=this.pointAt(e);if(!o)return;let n=Math.max(1,this.indexAt(e)),r=this.points.slice(0,n),i=this.points.slice(n);return St(r[n-1],o)||r.push(o),St(i[0],o)||i.unshift(o),[r,i]}splitNear(e){let o=this.closestT(e);return o!==void 0?this.splitAt(o):void 0}indexAt(e){let n=this.points.length-1;if(n<0)return;if(n===0||e<=0)return 0;if(e>=1)return n;let r=this.index,i=e*r[n];for(let s=1;s<=n;s++)if(r[s]>=i)return s}sampleUniform(e,o=!1,n=[]){let{index:r,points:i}=this,s=this.totalLength(),c=e/s,l=r.length;for(let f=0,p=1;f<1;f+=c){let m=f*s;for(;m>=r[p]&&p<l;)p++;if(p>=l)break;let a=r[p-1];n.push(Tt([],i[p-1],i[p],(m-a)/(r[p]-a)))}return o&&n.push(S([],i[i.length-1])),n}sampleFixedNum(e,o=!1,n){return this.sampleUniform(this.totalLength()/e,o,n)}buildIndex(){let e=[0],o=this.points,n=o.length;for(let r=0,i=1;i<n;r=i,i++)e[i]=e[r]+Ge(o[r],o[i]);this.index=e}};var He=(t,e,o=!1,n=!1)=>{if(e!==void 0){let r=new I(t,o);return C(e)?o?e.dist?r.sampleUniform(e.dist,e.last):r.sampleFixedNum(e.num||E,e.last):e.dist?r.sampleUniform(e.dist,e.last!==!1):r.sampleFixedNum(e.num||E,e.last!==!1):r.sampleFixedNum(e||E,!o)}return n?Wt(t):t};var Xe=(t,e,o,n,r,i)=>{if(C(i)&&i.dist!==void 0)return new I(Xe(t,e,o,n,r,i.num||E)).sampleUniform(i.dist,i.last!==!1);i=R(i)?{num:i,last:!0}:Object.assign({num:E},i);let s=r-n,c=i.theta?Math.round(s/i.theta):i.num;s/=c,i.last!==!1&&c++;let l=new Array(c);for(let f=0;f<c;f++)l[f]=On(t,e,o,n+f*s);return l};var te=(t,e)=>new t(Wt(e.points),En(e));var Mt=class extends Nt{get type(){return"cubic"}copy(){return te(Mt,this)}toHiccup(){return["path",this.attribs,[["M",this.points[0]],...this.toHiccupPathSegments()]]}toHiccupPathSegments(){let e=this.points;return[["C",e[1],e[2],e[3]]]}};var $t=class extends Nt{get type(){return"poly"}copy(){return te($t,this)}toHiccup(){return["polygon",this.attribs,this.points]}};var Nn=t=>C(Ro(t))?t.pop():void 0;var ee=t=>function e(o,n){if(C(n)&&n.dist!==void 0)return new I(e(o,n.num||E)).sampleUniform(n.dist,n.last!==!1);n=R(n)?{num:n,last:!0}:Object.assign({num:E},n);let r=[];return t(r,o,n.num),n.last&&r.push(S([],o[o.length-1])),r},oe=t=>(e,o=!1,n)=>{let r=R(n)?{num:n}:n,i=e.length-1;return Array.prototype.concat.apply([],e.map((s,c)=>{let l=!o&&c===i;return t(s,Object.assign(Object.assign({},r),{last:l}))}))};var Ze=ee((t,[e,o,n,r],i)=>{let s=1/i;for(let c=0;c<i;c++)t.push(Jt([],e,o,n,r,c*s))}),Sa=oe(Ze);var We=ee((t,[e,o,n],r)=>{let i=1/r;for(let s=0;s<r;s++)t.push(Kt([],e,o,n,s*i))}),Na=oe(We);var Mn=(t,e)=>{let o=Nn(e);return new t(e.length===1?e[0]:e,o)};function $n(...t){return Mn(Mt,t)}var wt=Symbol(),wn=_o;function re(t,e){let o={},n=e?Ai(e):{},r=(...i)=>{let s=t(...i),c=o[s]||ne(o,n,s)||o[wt];return c?c(...i):ft(`missing implementation for: "${s.toString()}"`)};return r.add=(i,s)=>(o[i]&&wn.warn(`overwriting '${i.toString()}' impl`),o[i]=s,!0),r.addAll=i=>{let s=!0;for(let c in i)s=r.add(c,i[c])&&s;return s},r.remove=i=>o[i]?(delete o[i],!0):!1,r.callable=(...i)=>{let s=t(...i);return!!(o[s]||ne(o,n,s)||o[wt])},r.isa=(i,s)=>{let c=n[i];!c&&(n[i]=c=new Set),c.add(s)},r.impls=()=>{let i=new Set(Object.keys(o));for(let s in n)ne(o,n,s)&&i.add(s);return o[wt]&&i.add(wt),i},r.rels=()=>n,r.parents=i=>n[i],r.ancestors=i=>new Set(kn([],n,i)),r.dependencies=function*(){for(let i in n)for(let s of n[i])yield[i,s];for(let i in o)!n[i]&&(yield[i,void 0])},r}var ne=(t,e,o)=>{let n=e[o];if(!!n)for(let r of n){let i=t[r]||ne(t,e,r);if(i)return i}},kn=(t,e,o)=>{let n=e[o];if(n)for(let r of n)t.push(r),kn(t,e,r);return t},Ai=t=>{let e={};for(let o in t){let n=t[o];e[o]=n instanceof Set?n:new Set(n)}return e};var ie=t=>t.type;var P=re(ie);P.addAll({aabb:({pos:t,size:e})=>{let[o,n,r]=t,[i,s,c]=rn([],t,e);return[[o,n,r],[o,n,c],[i,n,c],[i,n,r],[o,s,r],[o,s,c],[i,s,c],[i,s,r]]},arc:(t,e)=>Xe(t.pos,t.r,t.axis,t.start,t.end,e),circle:(t,e=E)=>{let o=t.pos,n=t.r,[r,i]=Rn(e,n),s=x/r;i&&r++;let c=new Array(r);for(let l=0;l<r;l++)c[l]=Zt(null,[n,l*s],o);return c},cubic:(t,e)=>Ze(t.points,e),ellipse:(t,e=E)=>{let o=[],n=t.pos,r=t.r,[i,s]=Rn(e,Math.max(t.r[0],t.r[1])),c=x/i;s&&i++;for(let l=0;l<i;l++)o[l]=Qt([],D(l*c),r,n);return o},group:({children:t})=>t.reduce((e,o)=>e.concat(P(o)),[]),path:(t,e)=>{let o=R(e)?{num:e}:e,n=[];for(let r=t.segments,i=r.length-1,s=0;s<=i;s++){let c=r[s];c.geo&&(n=n.concat(P(c.geo,Object.assign(Object.assign({},o),{last:s===i&&!t.closed}))))}return n},points:t=>t.points,poly:(t,e)=>He(t.points,e,!0),polyline:(t,e)=>He(t.points,e),quadratic:(t,e)=>We(t.points,e),rect:(t,e)=>{let o=t.pos,n=Ht([],o,t.size),r=[ln([],o),[n[0],o[1]],n,[o[0],n[1]]];return e!=null?P(new $t(r),e):r}});P.isa("line","polyline");P.isa("points3","points");P.isa("quad","poly");P.isa("tri","poly");var Rn=(t,e)=>R(t)?[t,!1]:[t.theta?Math.floor(x/t.theta):t.dist?Math.floor(x/(t.dist/e)):t.num||E,t.last===!0];var se=V((t,e)=>t.repeat(e));var Ye=V((t,e,o="")=>{let n=se("0",e);return r=>(r=(r>>>0).toString(t),o+(r.length<e?n.substr(r.length)+r:r))}),nm=Ye(2,8),rm=Ye(2,16),im=Ye(2,32);var ce=Lo;var kt=V((t,e=" ")=>{let o=se(String(e),t);return(n,r)=>n==null?o:(n=n.toString(),r=r!==void 0?r:n.length,r<t?o.substr(r)+n:n)}),fm=kt(2,"0"),pm=kt(3,"0"),am=kt(4,"0");var Cn=V((t,e=!1)=>e?o=>In(o)||o.toFixed(t):o=>o.toFixed(t)),hm=V((t,e=3)=>{let o=t-e-1,n=Math.pow(10,o),r=-Math.pow(10,o-1),i=Math.pow(10,-(e-1)),s=kt(t);return c=>{let l=Math.abs(c);return s(In(c)||(c===0?"0":l<i||l>=n?Si(c,t):c.toFixed(e-(c<r?1:0))))}}),Si=(t,e)=>t.toExponential(Math.max(e-4-(Math.log(Math.abs(t))/Math.LN10>=10?2:1)-(t<0?1:0),0)),In=t=>isNaN(t)?"NaN":t===Infinity?"+\u221E":t===-Infinity?"-\u221E":void 0;var vn=(t=0)=>e=>(e*100).toFixed(t)+"%";var Ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},Dn=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/,_m=new RegExp(`[${Object.keys(Ei).join("")}]`,"g");var Ln={button:1,option:1,script:1,style:1,text:1,textarea:1,title:1},Qe=t=>t.split(" ").reduce((e,o)=>(e[o]=!0,e),{}),Pn=Qe("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view"),bm=Qe("area base br col command embed hr img input keygen link meta param source stop track use wbr ?xml"),ym=Qe("animate circle ellipse line path polygon polyline rect");var Fn=(t,e)=>{if(e=at(e),e==null)return t;if(k(e))return t+" "+e;let o=new Set(t.split(" "));for(let n in e)at(e[n])?o.add(n):o.delete(n);return[...o].join(" ")},zn=(t,e,o)=>{e&&(t.id=e);let n=at(t.class);return o?(o=o.replace(/\./g," "),t.class=n?Fn(o,n):o):n&&(t.class=k(n)?n:Fn("",n)),t};var qn=t=>{let e="",o;for(let n in t)o=at(t[n]),ho(o)&&(o=o(t)),o!=null&&(e+=`${n}:${o};`);return e};var Gn=(t,e)=>{if(t==null||!e||!e.length)return t;let o=Object.assign({},t);for(let n of e){let r=o[n];_(r,"deref")&&(o[n]=r.deref())}return o};var Un=t=>Object.keys(t).reduce((e,o)=>(e.push(`${o}: ${t[o]}`),e),[]).join(" ");var Im=Object.freeze([0,0,0,1]),Cm=Object.freeze([1,1,1,1]),vm=Object.freeze([1,0,0,1]),Dm=Object.freeze([0,1,0,1]),Lm=Object.freeze([0,0,1,1]),Pm=Object.freeze([0,1,1,1]),Fm=Object.freeze([1,0,1,1]),zm=Object.freeze([1,1,0,1]);var jn=[3.1338561,-.9787684,.0719453,-1.6168667,1.9161415,-.2289914,-.4906146,.033454,1.4052427];var Vn=[3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252];var Bn=[.96422,1,.82521],Hn=[.95047,1,1.08883];var ot=Cn(3),Je=vn(3);var Xn=1/255,qm=1/256;var Ke={};var Zn=(t,e,o,n)=>{let r=Ke[o];zt(!!r,`no conversions available for ${o}`);let i=r[n];return i?i(t,e):Ke.rgb[n]?r.rgb(t,Ke.rgb[n]([],e)):ft(`can't convert: ${n} -> ${o}`)};var O=(t,e=1)=>t!=null?g(t):e;var le=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055;var Wn=(t,e,o=1)=>w(t||e,Gt(e[0]),g(e[1]),g(e[2]),O(e[3],o));var Yn=(t,e)=>{t=Wn(t||e,e);let o=t[1],n=t[2],r=(2-o)*n/2;return t[2]=r,t[1]=r&&r<1?o*n/(r<.5?r*2:2-r*2):o,t};var _t=(t,e)=>w(t||e,le(e[0]),le(e[1]),le(e[2]),O(e[3])),nu=1/2.2;var Qn=(t,e,o,n=!1)=>{let r=Yt(e,o,0,0,3),i=Yt(e,o,1,0,3),s=Yt(e,o,2,0,3),c=O(o[3]);return n?w(t||o,g(r),g(i),g(s),c):w(t||o,r,i,s,c)};var to=t=>{let e=t**3;return e>.008856?e:(t-16/116)/7.787},eo=(t,e,o=Bn)=>{let n=(e[0]+.16)/1.16;return w(t||e,to(e[1]/5+n)*o[0],to(n)*o[1],to(n-e[2]/2)*o[2],O(e[3]))},Jn=(t,e)=>eo(t,e,Hn);var Kn=(t,e)=>{let{1:o,2:n}=e;n*=x;let r=O(e[3]);return o>0?w(t||e,e[0],Math.cos(n)*o,Math.sin(n)*o,r):w(t||e,e[0],0,0,r)};var oo=(t,e,o=jn)=>Qn(t,o,e),tr=(t,e)=>oo(t,e,Vn);var no=(t,e)=>oo(null,eo(t,e)),er=(t,e)=>tr(null,Jn(t,e));var fe=t=>{let e=ot(Gt(t[0])*360),o=Je(g(t[1])),n=Je(g(t[2])),r=O(t[3]);return r<1?`hsla(${e},${o},${n},${ot(r)})`:`hsl(${e},${o},${n})`};var or=t=>fe(Yn([],t));var pe=t=>{let e=t>>>24;return e<255?`rgba(${t>>16&255},${t>>8&255},${t&255},${ot(e*Xn)})`:`#${ce(t&16777215)}`};var nr=tn;var W=t=>{let e=g(t[0])*255+.5|0,o=g(t[1])*255+.5|0,n=g(t[2])*255+.5|0,r=O(t[3]);return r<1?`rgba(${e},${o},${n},${ot(r)})`:`#${ce(e<<16|o<<8|n)}`};var rr=t=>W(_t([],t));var ir={abgr32:t=>pe(nr(t[0])),argb32:t=>pe(t[0]),hsl:fe,hsv:or,lab50:t=>W(_t(null,no([],t))),lab65:t=>W(_t(null,er([],t))),lch:t=>W(_t(null,no(null,Kn([],t)))),rgb:rr,srgb:W},sr=t=>{let e;return k(t)?t:R(t)?pe(t):t.mode?(e=ir[t.mode])?e(t):ir.rgb(Zn([],t,"rgb",t.mode)):W(t)};var cr="http://www.w3.org/2000/svg";var bt=re(ie);bt.addAll({arc:(t,e)=>t.pointAtTheta(At(e,t.start,t.end)),circle:(t,e)=>Zt(null,[t.r,x*e],t.pos),cubic:({points:t},e)=>Jt([],t[0],t[1],t[2],t[3],e),ellipse:(t,e)=>Qt([],D(x*e),t.r,t.pos),line:({points:t},e)=>an([],t[0],t[1],e),poly:(t,e)=>new I(t.points,!0).pointAt(e),polyline:(t,e)=>new I(t.points).pointAt(e),quadratic:({points:t},e)=>Kt([],t[0],t[1],t[2],e),ray:(t,e)=>yn([],t.pos,t.dir,e),ray3:(t,e)=>An([],t.pos,t.dir,e),rect:(t,e)=>new I(P(t),!0).pointAt(e)});bt.isa("quad","poly");bt.isa("tri","poly");var ae,me,Oi=[],Ti=[],Ni=t=>ae&&ae.length>=t?ae:ae=new Int32Array(t),Mi=t=>me&&me.length>=t?me:me=new Int32Array(t);var lr=(t,e,o,n,r)=>{let i=e.length,s=t.linear;if(t.distance=i,r!=="only-distance"){for(let c=0,l=0;c<i;c++,l+=3)s[l]=n,s[l+1]=c,s[l+2]=e[c];if(r==="full"){let c=t[o];for(let l=0;l<i;l++)c[l]=e[l]}}return t},ue=(t,e,o="full",n=L)=>{let r={distance:0,adds:{},dels:{},const:{},linear:[]};if(t===e||t==null&&e==null)return r;if(t==null||t.length===0)return lr(r,e,"adds",1,o);if(e==null||e.length===0)return lr(r,t,"dels",-1,o);let i=t.length>=e.length,s,c,l,f;i?(s=e,c=t):(s=t,c=e),l=s.length,f=c.length;let p=l+1,m=f-l,a=m+p,u=l+f+3,h=Mi(u).fill(-1,0,u),d=Ni(u).fill(-1,0,u),T=Oi,b=Ti,F=(yt,ao,mo)=>{let Se,B;ao>mo?(Se=h[yt-1],B=ao):(Se=h[yt+1],B=mo);let vt=B-(yt-p);for(;vt<l&&B<f&&n(s[vt],c[B]);)vt++,B++;h[yt]=b.length/3,b.push(vt,B,Se),d[yt]=B},A=-1,N;do{for(A++,N=-A+p;N<a;N++)F(N,d[N-1]+1,d[N+1]);for(N=a+A;N>a;N--)F(N,d[N-1]+1,d[N+1]);F(a,d[a-1]+1,d[a+1])}while(d[a]!==f);if(r.distance=m+2*A,o!=="only-distance"){for(A=h[a]*3;A>=0;)T.push(A),A=b[A+2]*3;o==="full"?$i(T,b,r,s,c,i):wi(T,b,r,s,c,i,o==="only-distance-linear")}return T.length=0,b.length=0,r},$i=(t,e,o,n,r,i)=>{let s=o.linear,c=o.const,l=t.length,f=0,p=0,m,a,u,h;for(i?(m=o.dels,a=o.adds,u=-1,h=1):(m=o.adds,a=o.dels,u=1,h=-1);--l>=0;){let d=t[l],T=e[d],b=e[d+1],F=b-T;for(;f<T||p<b;){let A=p-f;F>A?(s.push(u,p,m[p]=r[p]),p++):F<A?(s.push(h,f,a[f]=n[f]),f++):(s.push(0,f,c[f]=n[f]),f++,p++)}}},wi=(t,e,o,n,r,i,s)=>{let c=o.linear,l=i?-1:1,f=i?1:-1,p=t.length,m=0,a=0;for(;--p>=0;){let u=t[p],h=e[u],d=e[u+1],T=d-h;for(;m<h||a<d;){let b=a-m;T>b?(c.push(l,a,r[a]),a++):T<b?(c.push(f,m,n[m]),m++):(s&&c.push(0,m,n[m]),m++,a++)}}};var fr=(t,e,o="full",n=L)=>t===e?{distance:0}:o==="only-distance"?ki(t,e,n):Ri(t,e,n),ki=(t,e,o)=>{t||(t={}),e||(e={});let n=0;for(let r in t){let i=e[r];(i===void 0||!o(t[r],i))&&n++}for(let r in e)!(r in t)&&n++;return{distance:n}},Ri=(t,e,o)=>{t||(t={}),e||(e={});let n=0,r=[],i=[],s=[];for(let c in t){let l=e[c];l===void 0?(i.push(c),n++):o(t[c],l)||(s.push(c,l),n++)}for(let c in e)c in t||(r.push(c),n++);return{distance:n,adds:r,dels:i,edits:s}};var de=Array.isArray,Ii=Math.max,pr=Object.getPrototypeOf({}),he="function",xe="string",ar=(()=>{let t=new Array(2048);for(let e=2,o=t.length;e<o;e++)t[e]=e-2;return t})(),Ci=t=>{if(t<=ar.length)return ar.slice(0,t);let e=new Array(t);for(;--t>=2;)e[t]=t-2;return e},ro=(t,e,o,n,r,i=0)=>{let s=r[1];if(s.__skip)return;if(s.__diff===!1){nt(n),e.replaceChild(t,o,i,r);return}let c=n[1];if(c&&c.__skip){e.replaceChild(t,o,i,r,!1);return}let l=s.__impl;if(l&&l!==e)return l.diffTree(t,l,o,n,r,i);let f=ue(n,r,"only-distance-linear",rt);if(f.distance===0)return;let p=f.linear,m=e.getChild(o,i),a,u,h,d;if(p[0]!==0||n[1].key!==s.key){nt(n),e.replaceChild(t,o,i,r);return}if((d=n.__release)&&d!==r.__release&&nt(n),p[3]!==0&&(Li(e,m,n[1],r[1]),f.distance===2))return;let T=p.length,b=n.length-1,F=Pi(p),A=Ci(b+1);for(a=2,u=6;u<T;a++,u+=3)h=p[u],!!h&&(h===-1?vi(t,e,m,n,r,p,u,F,A,b):Di(t,e,m,p,u,F,A,b));(d=r.__init)&&d!=n.__init&&d.apply(r,[m,...r.__args])},vi=(t,e,o,n,r,i,s,c,l,f)=>{let p=i[s+2];if(de(p)){let m=p[1].key;if(m!==void 0&&c[m][2]!==void 0){let a=c[m];m=a[0],ro(t,e,o,n[m],r[a[2]],l[m])}else{let a=i[s+1];nt(p),e.removeChild(o,l[a]),Fi(l,f,a)}}else typeof p===xe&&e.setContent(o,"")},Di=(t,e,o,n,r,i,s,c)=>{let l=n[r+2];if(typeof l===xe)e.setContent(o,l);else if(de(l)){let f=l[1].key;if(f===void 0||i[f][0]===void 0){let p=n[r+1];e.createTree(t,o,l,s[p]),zi(s,c,p)}}},Fi=(t,e,o)=>{for(;e>o;e--)t[e]=Ii(t[e]-1,0)},zi=(t,e,o)=>{for(;e>=o;e--)t[e]++},Li=(t,e,o,n)=>{let r=fr(o,n,"full",L);t.removeAttribs(e,r.dels,o);let i=J,s,c,l;for(l=r.edits,s=l.length;(s-=2)>=0;)c=l[s],c[0]==="o"&&c[1]==="n"&&t.removeAttribs(e,[c],o),c!=="value"?t.setAttrib(e,c,l[s+1],n):i=l[s+1];for(l=r.adds,s=l.length;--s>=0;)c=l[s],c!=="value"?t.setAttrib(e,c,n[c],n):i=n[c];i!==J&&t.setAttrib(e,"value",i,n)},nt=t=>{if(de(t)){let e;if((e=t[1])&&e.__release===!1)return;for(t.__release&&(t.__release.apply(t.__this,t.__args),delete t.__release),e=t.length;--e>=2;)nt(t[e])}},Pi=t=>{let e,o,n,r={};for(let i=t.length;(i-=3)>=0;)o=t[i+2],de(o)&&(e=o[1].key)!==void 0&&(n=r[e],!n&&(r[e]=n=[,,]),n[t[i]+1]=t[i+1]);return r},rt=(t,e)=>{let o;if(t===e)return!0;if(t!=null){if(typeof t.equiv===he)return t.equiv(e)}else return t==e;if(e!=null){if(typeof e.equiv===he)return e.equiv(t)}else return t==e;return typeof t===xe||typeof e===xe?!1:(o=Object.getPrototypeOf(t),(o==null||o===pr)&&(o=Object.getPrototypeOf(e),o==null||o===pr)?!(t.__diff===!1||e.__diff===!1)&&ke(t,e,rt):typeof t!==he&&t.length!==void 0&&typeof e!==he&&e.length!==void 0?Me(t,e,rt):t instanceof Set&&e instanceof Set?$e(t,e,rt):t instanceof Map&&e instanceof Map?we(t,e,rt):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():t!==t&&e!==e)};var ge=z,mr=pt,ur=k,dr=(t,e)=>e.__init&&e.__init.apply(e.__this,[t,...e.__args]),Rt=(t,e,o,n,r,i=!0)=>{if(ge(n)){let s=n[0];if(typeof s=="function")return Rt(t,e,o,s.apply(null,[t.ctx,...n.slice(1)]),r);let c=n[1];if(c.__impl)return c.__impl.createTree(t,o,n,r,i);let l=e.createElement(o,s,c,r);if(n.length>2){let f=n.length;for(let p=2;p<f;p++)Rt(t,e,l,n[p],void 0,i)}return i&&dr(l,n),l}if(mr(n)){let s=[];for(let c of n)s.push(Rt(t,e,o,c,r,i));return s}return n==null?o:e.createTextElement(o,n)},It=(t,e,o,n,r=0)=>{if(ge(n)){let i=e.getChild(o,r);typeof n[0]=="function"&&It(t,e,o,n[0].apply(null,[t.ctx,...n.slice(1)]),r);let s=n[1];if(s.__impl)return s.__impl.hydrateTree(t,o,n,r);dr(i,n);for(let c in s)c[0]==="o"&&c[1]==="n"&&e.setAttrib(i,c,s[c]);for(let c=n.length,l=2;l<c;l++)It(t,e,i,n[l],l-2)}else if(mr(n))for(let i of n)It(t,e,o,i,r),r++},xr=(t,e,o,n)=>{let r=Pn[e]?document.createElementNS(cr,e):document.createElement(e);return o&&qi(r,o),hr(t,r,n)},gr=(t,e,o)=>hr(t,document.createTextNode(e),o),hr=(t,e,o)=>t?o===void 0?t.appendChild(e):t.insertBefore(e,t.children[o]):e,_r=(t,e)=>t.children[e],br=(t,e,o,n,r,i=!0)=>(e.removeChild(o,n),e.createTree(t,o,r,n,i));var yr=(t,e)=>t.textContent=e,qi=(t,e)=>{for(let o in e)io(t,o,e[o],e);return t},io=(t,e,o,n)=>{if(e.startsWith("__"))return;let r=e[0]==="o"&&e[1]==="n";if(!r&&typeof o=="function"&&(o=o(n)),o!==void 0&&o!==!1)switch(e){case"style":Ui(t,o);break;case"value":Gi(t,o);break;case"prefix":t.setAttribute(e,ur(o)?o:Un(o));break;case"accesskey":t.accessKey=o;break;case"contenteditable":t.contentEditable=o;break;case"tabindex":t.tabIndex=o;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":t[e]=o;break;default:r?ji(t,e.substr(2),o):t.setAttribute(e,o===!0?"":o)}else t[e]!=null?t[e]=null:t.removeAttribute(e);return t},Gi=(t,e)=>{let o;switch(t.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if((o=t.value)!==void 0&&typeof e=="string"){let n=e.length-(o.length-(t.selectionStart||0));t.value=e,t.selectionStart=t.selectionEnd=n;break}default:t.value=e}},Ar=(t,e,o)=>{for(let n=e.length;--n>=0;){let r=e[n];r[0]==="o"&&r[1]==="n"?Vi(t,r.substr(2),o[r]):t.hasAttribute(r)?t.removeAttribute(r):t[r]=null}},Ui=(t,e)=>(t.setAttribute("style",qn(e)),t),ji=(t,e,o)=>ur(o)?t.setAttribute("on"+e,o):ge(o)?t.addEventListener(e,...o):t.addEventListener(e,o),Vi=(t,e,o)=>ge(o)?t.removeEventListener(e,...o):t.removeEventListener(e,o);var Sr=(t,e)=>{let o=t.children[e];o!==void 0&&t.removeChild(o)};var _e=z,Bi=pt,Hi=C,Xi=(t,e)=>{let o=t[0],n=Hi(t[1]),r,i,s;return(typeof o!="string"||!(r=Dn.exec(o)))&&Dt(`${o} is not a valid tag name`),i=r[1],o===i&&n&&(!e||t[1].key)?t:(s=zn(n?Object.assign({},t[1]):{},r[2],r[3]),s.__skip&&t.length<3?[i,s]:[i,s,...t.slice(n?2:1)])},Er=(t,e)=>Y(e,t,t.ctx,[0],t.keys!==!1,t.span!==!1),Y=(t,e,o,n,r,i)=>{if(t!=null){if(_e(t)){if(t.length===0)return;let s,c=t[1],l;if(c&&(l=c.__impl)&&(l=l.normalizeTree))return l(e,t);let f=t[0];if(typeof f=="function")return Y(f.apply(null,[o,...t.slice(1)]),e,o,n,r,i);if(typeof f.render=="function"){let p=[o,...t.slice(1)];return s=Y(f.render.apply(f,p),e,o,n,r,i),_e(s)&&(s.__this=f,s.__init=f.init,s.__release=f.release,s.__args=p),s}return s=Xi(t,r),c=s[1],c.__normalize===!1?s:(r&&c.key===void 0&&(c.key=n.join("-")),s.length>2?Zi(s,c,e,o,n,r,i):s)}return typeof t=="function"?Y(t(o),e,o,n,r,i):typeof t.toHiccup=="function"?Y(t.toHiccup(e.ctx),e,o,n,r,i):typeof t.deref=="function"?Y(t.deref(),e,o,n,r,i):i?["span",r?{key:n.join("-")}:{},t.toString()]:t.toString()}},Zi=(t,e,o,n,r,i,s)=>{let c=t[0],l=[c,e];s=s&&!Ln[c];for(let f=2,p=2,m=0,a=t.length;f<a;f++){let u=t[f];if(u!=null){let h=_e(u);if(h&&_e(u[0])||!h&&Bi(u))for(let d of u)d=Y(d,o,n,r.concat(m),i,s),d!==void 0&&(l[p++]=d),m++;else u=Y(u,o,n,r.concat(m),i,s),u!==void 0&&(l[p++]=u),m++}}return l};var Or={createTree(t,e,o,n,r){return Rt(t,this,e,o,n,r)},hydrateTree(t,e,o,n){return It(t,this,e,o,n)},diffTree(t,e,o,n,r){ro(t,this,e,o,n,r)},normalizeTree:Er,getElementById(t){return document.getElementById(t)},getChild:_r,createElement:xr,createTextElement:gr,replaceChild(t,e,o,n,r){br(t,this,e,o,n,r)},removeChild:Sr,setContent:yr,removeAttribs:Ar,setAttrib:io};var Tr=(t,e)=>k(t)?e.getElementById(t):t;var Nr=(t,e={},o=Or)=>{let n=Object.assign({root:"app"},e),r=[],i=!0,s=Tr(n.root,o),c=()=>{if(i){n.ctx=Gn(e.ctx,n.autoDerefKeys);let l=o.normalizeTree(n,t);l!=null&&(n.hydrate?(o.hydrateTree(n,s,l),n.hydrate=!1):o.diffTree(n,s,r,l),r=l),i&&requestAnimationFrame(c)}};return requestAnimationFrame(c),()=>i=!1};var it=(t,e)=>{let o;(o=e.fill)&&o!=="none"&&t.fill(),(o=e.stroke)&&o!=="none"&&t.stroke(),(o=e.clip)&&t.clip(o===!0?"nonzero":o)};var so=(t,e,o,n,r=0,i=x,s=!1)=>{t.beginPath(),t.arc(o[0],o[1],n,r,i,s),it(t,e)},Mr=(t,e,o,n,r=0,i=0,s=x,c=!1)=>{t.beginPath(),t.ellipse(o[0],o[1],n[0],n[1],r,i,s,c),it(t,e)};var co=sr,$r=(t,e)=>k(e)?e[0]==="$"?t.grads[e.substr(1)]:e:co(e),wr=(t,{from:e,to:o},n)=>{let r=t.createLinearGradient(e[0],e[1],o[0],o[1]);for(let i of n)r.addColorStop(i[0],co(i[1]));return r},kr=(t,{from:e,to:o,r1:n,r2:r},i)=>{let s=t.createRadialGradient(e[0],e[1],n,o[0],o[1],r);for(let c of i)s.addColorStop(c[0],co(c[1]));return s};var Rr=(t,e,{width:o,height:n},r,i,s,c)=>{if(_(r,"toImageData")&&(r=r.toImageData()),r instanceof ImageData){t.putImageData(r,i[0],i[1]);return}o=o||r.width,n=n||r.height,s?t.drawImage(r,s[0],s[1],c?c[0]:o,c?c[1]:n,i[0],i[1],o,n):t.drawImage(r,i[0],i[1],o,n)};var be=(t,e,o,n)=>{e.stroke!=="none"&&(t.beginPath(),t.moveTo(o[0],o[1]),t.lineTo(n[0],n[1]),t.stroke())},Ir=(t,e,o)=>{if(e.stroke!=="none"){t.beginPath();for(let{0:n,1:r}of o)t.moveTo(n[0],n[1]),t.lineTo(r[0],r[1]);t.stroke()}};var vr=(t,e,o,n)=>{let r;(r=e.fill)&&r!=="none"&&Cr(t,o,n,"fill","fillRect"),(r=e.stroke)&&r!=="none"&&Cr(t,o,n,"stroke","strokeRect")},Cr=(t,e,o,n,r)=>{let{start:i,cstride:s,estride:c,size:l}=Object.assign({start:0,cstride:1,estride:2,size:1},e),f=e&&e.num!=null?e.num:(o.length-i)/c|0;if(e.shape==="circle")for(let p=i;--f>=0;p+=c)t.beginPath(),t.arc(o[p],o[p+s],l,0,x),t[n]();else{let p=l/2;for(let m=i;--f>=0;m+=c)t[r](o[m]-p,o[m+s]-p,l,l)}};var ye=(t,e,o)=>{t.beginPath();let n=[0,0];for(let r=0,i=o.length;r<i;r++){let s=o[r],c=s[1],l,f;switch(s[0]){case"m":c=[n[0]+c[0],n[1]+c[1]];case"M":t.moveTo(c[0],c[1]),n=c;break;case"l":c=[n[0]+c[0],n[1]+c[1]];case"L":t.lineTo(c[0],c[1]),n=c;break;case"h":c=[n[0]+c,n[1]],t.lineTo(c[0],c[1]),n=c;break;case"H":c=[c,n[1]],t.lineTo(c[0],c[1]),n=c;break;case"v":c=[n[0],n[1]+c],t.lineTo(c[0],c[1]),n=c;break;case"V":c=[n[0],c],t.lineTo(c[0],c[1]),n=c;break;case"c":l=s[2],f=s[3],f=[n[0]+f[0],n[1]+f[1]],t.bezierCurveTo(n[0]+c[0],n[1]+c[1],n[0]+l[0],n[1]+l[1],f[0],f[1]),n=f;break;case"C":l=s[2],f=s[3],t.bezierCurveTo(c[0],c[1],l[0],l[1],f[0],f[1]),n=f;break;case"q":l=s[2],l=[n[0]+l[0],n[1]+l[1]],t.quadraticCurveTo(n[0]+c[0],n[1]+c[1],l[0],l[1]),n=l;break;case"Q":l=s[2],t.quadraticCurveTo(c[0],c[1],l[0],l[1]),n=l;break;case"a":l=s[2],l=[n[0]+l[0],n[1]+l[1]],t.arcTo(n[0]+c[0],n[1]+c[1],l[0],l[1],s[3]),n=l;break;case"A":l=s[2],t.arcTo(c[0],c[1],l[0],l[1],s[3]),n=l;break;case"z":case"Z":t.closePath()}}it(t,e)};var Lr=(t,e,o,n)=>{let r;(r=e.fill)&&r!=="none"&&Dr(t,o,n,"fill","fillRect"),(r=e.stroke)&&r!=="none"&&Dr(t,o,n,"stroke","strokeRect")},Dr=(t,e,o,n,r)=>{let i=e&&e.size||1;if(e.shape==="circle")for(let s of o)t.beginPath(),t.arc(s[0],s[1],i,0,x),t[n]();else{let s=i/2;for(let c of o)t[r](c[0]-s,c[1]-s,i,i)}};var Pr=(t,e,o)=>{o.length<2||(lo(t,o),t.closePath(),it(t,e))},lo=(t,e)=>{let o=e[0];t.beginPath(),t.moveTo(o[0],o[1]);for(let n=1,r=e.length;n<r;n++)o=e[n],t.lineTo(o[0],o[1])};var Fr=(t,e,o)=>{o.length<2||e.stroke=="none"||(lo(t,o),t.stroke())};var zr=(t,e,o,n,r,i=0)=>{let s;if(i>0)return i=Math.min(Math.min(n,r)/2,i),n-=2*i,r-=2*i,ye(t,e,[["M",[o[0]+i,o[1]]],["h",n],["a",[i,0],[i,i],i],["v",r],["a",[0,i],[-i,i],i],["h",-n],["a",[-i,0],[-i,-i],i],["v",-r],["a",[0,-i],[i,-i],i]]);(s=e.fill)&&s!=="none"&&t.fillRect(o[0],o[1],n,r),(s=e.stroke)&&s!=="none"&&t.strokeRect(o[0],o[1],n,r)};var Wi={align:"left",alpha:1,baseline:"alphabetic",compose:"source-over",dash:[],dashOffset:0,direction:"inherit",fill:"#000",filter:"none",font:"10px sans-serif",lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowBlur:0,shadowColor:"rgba(0,0,0,0)",shadowX:0,shadowY:0,smooth:!0,stroke:"#000",weight:1},qr={align:"textAlign",alpha:"globalAlpha",baseline:"textBaseline",clip:"clip",compose:"globalCompositeOperation",dash:"setLineDash",dashOffset:"lineDashOffset",direction:"direction",fill:"fillStyle",filter:"filter",font:"font",lineCap:"lineCap",lineJoin:"lineJoin",miterLimit:"miterLimit",shadowBlur:"shadowBlur",shadowColor:"shadowColor",shadowX:"shadowOffsetX",shadowY:"shadowOffsetY",smooth:"imageSmoothingEnabled",stroke:"strokeStyle",weight:"lineWidth"},Gr=(t,e=!1)=>({attribs:Object.assign({},t.attribs),grads:Object.assign({},t.grads),edits:[],restore:e}),jr=(t,e,o)=>{let n;if(!!o){Yi(t,o)&&(n=Gr(e,!0));for(let r in o){let i=qr[r];if(i){let s=o[r];s!=null&&e.attribs[r]!==s&&(!n&&(n=Gr(e)),n.attribs[r]=s,n.edits.push(r),Ur(t,e,r,i,s))}}return n}},Vr=(t,e,o)=>{if(o.restore){t.restore();return}let n=o.edits,r=e.attribs;for(let i=n.length;--i>=0;){let s=n[i],c=r[s];Ur(t,e,s,qr[s],c??Wi[s])}},fo=(t,e,o)=>{!t.grads&&(t.grads={}),t.grads[e]=o},Ur=(t,e,o,n,r)=>{switch(o){case"fill":case"stroke":case"shadowColor":t[n]=$r(e,r);break;case"dash":t[n].call(t,r);break;case"clip":break;default:t[n]=r}},Yi=(t,e)=>{let o;return(o=e.transform)||e.setTransform||e.translate||e.scale||e.rotate?(t.save(),o?t.transform(o[0],o[1],o[2],o[3],o[4],o[5]):(o=e.setTransform)?t.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]):((o=e.translate)&&t.translate(o[0],o[1]),(o=e.rotate)&&t.rotate(o),(o=e.scale)&&(Lt(o)?t.scale(o[0],o[1]):t.scale(o,o))),!0):!1};var Br=(t,e,o,n,r)=>{let i;(i=e.fill)&&i!=="none"&&t.fillText(n.toString(),o[0],o[1],r),(i=e.stroke)&&i!=="none"&&t.strokeText(n.toString(),o[0],o[1],r)};var Ct=(t,e,o={attribs:{},edits:[]})=>{if(!e)return;if(_(e,"toHiccup")){Ct(t,e.toHiccup(),o);return}if(z(e[0])){for(let i of e)Ct(t,i,o);return}let n=jr(t,o,e[1]),r=n?n.attribs:o.attribs;if(!r.__skip){switch(e[0]){case"g":case"defs":Qi(t,n,o,e);break;case"linearGradient":fo(o,e[1].id,wr(t,e[1],e[2]));break;case"radialGradient":fo(o,e[1].id,kr(t,e[1],e[2]));break;case"points":Lr(t,r,e[1],e[2]);break;case"packedPoints":vr(t,r,e[1],e[2]);break;case"line":be(t,r,e[2],e[3]);break;case"lines":Ir(t,r,e[2]);break;case"hline":be(t,r,[-1e6,e[2]],[1e6,e[2]]);break;case"vline":be(t,r,[e[2],-1e6],[e[2],1e6]);break;case"polyline":Fr(t,r,e[2]);break;case"polygon":Pr(t,r,e[2]);break;case"path":ye(t,r,e[2]);break;case"rect":zr(t,r,e[2],e[3],e[4],e[5]);break;case"circle":so(t,r,e[2],e[3]);break;case"ellipse":Mr(t,r,e[2],e[3],e[4],e[5],e[6]);break;case"arc":so(t,r,e[2],e[3],e[4],e[5]);break;case"text":Br(t,r,e[2],e[3],e[4]);break;case"img":Rr(t,r,e[1],e[2],e[3],e[4],e[5]);default:}n&&Vr(t,o,n)}},Qi=(t,e,o,n)=>{let r=n.length,i=n[0]==="g"&&e||o;for(let s=2;s<r;s++)Ct(t,n[s],i)};var Ae="function",Ji="string",Xr={render(t,e,...o){let n=Object.assign({},e);delete n.__diff,delete n.__normalize;let r=window.devicePixelRatio||1;return r!==1&&(!n.style&&(n.style={}),n.style.width=`${n.width}px`,n.style.height=`${n.height}px`,n.width*=r,n.height*=r),["canvas",n,["g",{__impl:Hr,__diff:e.__diff!==!1,__normalize:e.__normalize!==!1,__release:e.__release===!0,__serialize:!1,__clear:e.__clear,scale:r!==1?r:null},...o]]}},po=(t,e,o)=>{let n=e.getContext("2d");zt(!!n,"canvas ctx unavailable");let r=o[1];if(r){if(r.__skip)return;r.__clear!==!1&&n.clearRect(0,0,e.width,e.height)}Ct(n,o)},st=(t,e)=>{if(e==null)return e;if(z(e)){let o=e[0];if(typeof o===Ae)return st(t,o.apply(null,[t.ctx,...e.slice(1)]));if(typeof o===Ji){let n=e[1];if(n&&n.__normalize===!1)return e;let r=[e[0],n];for(let i=2,s=e.length;i<s;i++){let c=st(t,e[i]);c!=null&&r.push(c)}return r}}else{if(typeof e===Ae)return st(t,e(t.ctx));if(typeof e.toHiccup===Ae)return st(t,e.toHiccup(t.ctx));if(typeof e.deref===Ae)return st(t,e.deref());if(pt(e)){let o=[];for(let n of e){let r=st(t,n);r!=null&&o.push(r)}return o}}return e},Ki=(t,e,o,n,r)=>{let i=n[1];if(i.__skip)return;if(i.__diff===!1)return nt(o),po(t,e,n);let s=i.__impl;if(s&&s!==Hr)return s.diffTree(t,e,o,n,r);if(ue(o,n,"only-distance",rt).distance>0)return po(t,e,n)},Hr={createTree:po,normalizeTree:st,diffTree:Ki,hydrateTree:y,getElementById:y,createElement:y,createTextElement:y,replaceChild:y,getChild:y,removeAttribs:y,removeChild:y,setAttrib:y,setContent:y};var Zr=25,ts=25,Wr=800,es=t=>$n([0,t*30],[100-Math.abs(t)*10,0],[300,t*6],[Wr,t*6],{id:t}),os=()=>[...v(es,ht(-(Zr>>1),(Zr>>1)+1))],ns=(t,e)=>{for(let o=t.length;--o>=0;){let n=t[o],r=n.points,i=n.attribs.id,[s,c]=D(e+i*.07),l=Math.cos(e*.25-i*.05);r[0][1]=(1-Math.abs(l))*i*30,r[2][0]=c*100+300,r[2][1]=s*150+i*6,r[3][1]=i*Math.abs(s*12)}},rs=t=>({curve:t[Ce.int()%t.length],pos:0,vel:Ce.minmax(.002,.01)}),is=t=>{for(let e=t.length;--e>=0;){let o=t[e];o.pos=$o(o.pos+o.vel)}},ss=t=>{let e=bt(t.curve,t.pos);return["line",{translate:e},pn(null,bt(t.curve,t.pos-.05),e),Pt]},cs=["defs",{},["linearGradient",{id:"curve",from:[0,0],to:[600,0]},[[0,[1,.796,0]],[1,[.549,0,0]]]],["linearGradient",{id:"part",from:[-30,0],to:[0,0]},[[0,[.05,.34,.41,.8]],[1,[.188,.38,.078,.8]]]]],ls=()=>{let t=os(),e=[...v(uo(rs,t),ht(ts))],o=0;return()=>{ns(t,o+=.01),is(e);let n=window.innerWidth,r=window.innerHeight-175,i=n/Wr;return[Xr,{width:n,height:r,__diff:!1},cs,["g",{translate:[0,r/2],scale:i,stroke:"$curve",compose:"screen"},...t,["g",{stroke:"$part",weight:2},...v(ss,e)]]]}};Nr(ls());})();
